;$(document).on('orViewLoaded',function(e,t){if($('div.panel form input[type=password]').length>0&&$('#uname').attr('value')!=''){$('div.panel form input[name=login_name]    ').attr('value',$('#uname').attr('value'));$('div.panel form input[name=login_password]').attr('value',$('#upassword').attr('value'))};$(e.target).find('form[data-autosave="true"] input[type="checkbox"]').click(function(){$(this).closest('form').submit()});$(e.target).find('input.submit.ok').click(function(){$(this).closest('form').submit()});$(e.target).find('input.submit.cancel').click(function(){});$(e.target).find('form').submit(function(e){formSubmit($(this));e.preventDefault()})});function formSubmit(e){if($('#pageelement_edit_editor').length>0){var a=CKEDITOR.instances['pageelement_edit_editor'];if(a){var l=a.getData();$('#pageelement_edit_editor').html(l)}};var t=$('<div class="notice info"><div class="text loader"></div></div>');$('#noticebar').prepend(t);$(t).show();$(e).find('.error').removeClass('error');var o=$(e).serializeArray(),d=$(e).attr('method').toUpperCase();if(d=='GET'){var r=$(e).data('action'),n=$(e).data('method'),s=$(e).data('id');loadView($(e).closest('div.content'),r,n,s,o)}
else{var i='./api/';$(e).closest('div.content').addClass('loader');i+='?output=json';o['output']='json';if($(e).data('async')||$(e).data('async')=='true'){$('div#dialog > .view').html('').hide()};$.ajax({'type':'POST',url:i,data:o,success:function(o,i,a){$(e).closest('div.content').removeClass('loader');$(t).remove();doResponse(o,i,e)},error:function(o,i,n){$(e).closest('div.content').removeClass('loader');$(t).remove();var r;try{var a=jQuery.parseJSON(o.responseText);r=a.error+'/'+a.description+': '+a.reason}catch(s){r=o.responseText};notify('error',r)}});$(e).fadeIn()}};function doResponse(e,t,o){if(t!='success'){alert('Server error: '+t);return};$.each(e['notices'],function(t,e){var i=$('<div class="notice '+e.status+'"><div class="text">'+e.text+'</div></div>');notifyBrowser(e.text);$.each(e.log,function(e,t){$(i).append('<div class="log">'+t+'</div>')});$('#noticebar').prepend(i);$(i).fadeIn().click(function(){$(this).fadeOut('fast',function(){$(this).remove()})});var a;if(e.status=='ok'){a=3;if($(o).data('async')!='true'){$('div#dialog > .view').html('').hide();$(o).closest('div.panel').find('div.header ul.views li.action.active').removeClass('dirty')}}
else{a=8};setTimeout(function(){$(i).fadeOut('slow').remove()},a*1000)});$.each(e['errors'],function(e,t){$('input[name='+t+']').addClass('error').parent().addClass('error').parents('fieldset').addClass('show').addClass('open')});if(!e.control){};if(e.control.redirect)window.location.href=e.control.redirect;if(e.control.new_style)setUserStyle(e.control.new_style);if(e.control.refresh);else if(e.control.next_view);else if(e.errors.length==0)$(o).closest('div.panel').find('li.action.active').orLoadView()};