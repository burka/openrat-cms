;jQuery.fn.orTree=function(){$(this).each(function(a,e){$(e).children('.or-navtree-node-control').click(function(){var a=$(this).parent('.or-navtree-node');if($(a).is('.or-navtree-node--is-open')){$(a).children('ul').slideUp('fast').remove();$(a).removeClass('or-navtree-node--is-open').addClass('or-navtree-node--is-closed').find('.tree-icon').removeClass('image-icon--node-open').addClass('image-icon--node-closed')}
else{$(e).closest('div.view').addClass('loader');var o=$(a).data('type'),t=$(a).data('id'),i=$(a).data('extra'),n='./api/?action=tree&subaction=loadBranch&id='+t+'&type='+o+'&output=json';if(typeof i==='string'){jQuery.each(jQuery.parseJSON(i.replace(/'/g,'"')),function(e,a){n=n+'&'+e+'='+a})}
else if(typeof i==='object'){jQuery.each(i,function(e,a){n=n+'&'+e+'='+a})}
else{};$.getJSON(n,function(a){let ul=$('<ul class="or-navtree-list" />');$(e).append(ul);let output=a['output'];$.each(output['branch'],function(a,e){let new_li=$('<li class="or-navtree-node or-navtree-node--is-closed or-draggable or-draggable--type-'+e.type+'" data-id="'+e.internalId+'" data-type="'+e.type+'" data-extra="'+JSON.stringify(e.extraId).replace(/"/g,'\'')+'"><div class="tree or-navtree-node-control"><i class="tree-icon image-icon image-icon--node-closed"></i></div><div class="clickable"><a href="./#/'+e.action+(e.internalId!='0'?'/'+e.internalId:'')+'" class="entry" data-extra="'+JSON.stringify(e.extraId).replace(/"/g,'\'')+'" data-id="'+e.internalId+'" data-action="'+e.action+'" data-type="open" title="'+e.description+'"><i class="image-icon image-icon--action-'+e['icon']+'"></i> '+e.text+'</a></div></li>');$(ul).append(new_li);$(new_li).orTree();$(new_li).find('.clickable').orLinkify();$(new_li).find('.clickable a').click(function(e){e.preventDefault()});registerTreeBranchEvents(ul)});$(ul).slideDown('fast')}).fail(function(){Openrat.Workbench.notify('','','ERROR','failed to load subtree',[],!1)}).always(function(){$(e).closest('div.view').removeClass('loader')});$(a).addClass('or-navtree-node--is-open').removeClass('or-navtree-node--is-closed').find('.tree-icon').addClass('image-icon--node-open').removeClass('image-icon--node-closed')}})})};