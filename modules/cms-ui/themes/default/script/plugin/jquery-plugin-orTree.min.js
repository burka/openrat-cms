;jQuery.fn.orTree=function(){$(this).each(function(a,e){$(e).children('.or-navtree-node-control').click(function(){var a=$(this).parent('.or-navtree-node');if($(a).is('.or-navtree-node--is-open')){$(a).children('ul').slideUp('fast').remove();$(a).removeClass('or-navtree-node--is-open').addClass('or-navtree-node--is-closed').find('.arrow').removeClass('arrow-down').addClass('arrow-right')}
else{$(e).closest('div.view').addClass('loader');var o=$(a).data('type'),t=$(a).data('id'),n=$(a).data('extra'),r='./api/?action=tree&subaction=loadBranch&id='+t+'&type='+o+'&output=json';if(typeof n==='string'){jQuery.each(jQuery.parseJSON(n),function(e,a){r=r+'&'+e+'='+a})}
else if(typeof n==='object'){jQuery.each(n,function(e,a){r=r+'&'+e+'='+a})}
else{};$.getJSON(r,function(a){$(e).append('<ul class="or-navtree-list"/>');var r=$(e).children('ul').first(),n=a['output'];$.each(n['branch'],function(a,e){var n=$('<li class="or-navtree-node or-navtree-node--is-closed" data-id="'+e.internalId+'" data-type="'+e.type+'"><div class="tree or-navtree-node-control"><div class="arrow arrow-right"></div></div><div class="clickable"><a href="./?action='+e.action+'&id='+e.internalId+'" class="entry" data-extra="'+JSON.stringify(e.extraId).replace(/"/g,'\'')+'" data-id="'+e.internalId+'" data-action="'+e.action+'" data-type="open" title="'+e.description+'"><img src="modules/cms-ui/themes/default/images/icon_'+e['icon']+'.png" />'+e.text+'</a></div></li>');$(r).append(n);$(n).orTree();$(n).find('.clickable').orLinkify();$(n).find('.clickable a').click(function(e){e.preventDefault()})});$(r).slideDown('fast')}).fail(function(){}).always(function(){$(e).closest('div.view').removeClass('loader')});$(a).addClass('or-navtree-node--is-open').removeClass('or-navtree-node--is-closed').find('.arrow').addClass('arrow-down').removeClass('arrow-right')}})})};