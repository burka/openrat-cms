;jQuery.fn.orTree=function(){$(this).each(function(a,e){$(e).children('.or-navtree-node-control').click(function(){var a=$(this).parent('.or-navtree-node');if($(a).is('.or-navtree-node--is-open')){$(a).children('ul').slideUp('fast').remove();$(a).removeClass('or-navtree-node--is-open').addClass('or-navtree-node--is-closed').find('.tree-icon').removeClass('image-icon--node-open').addClass('image-icon--node-closed')}
else{$(e).closest('div.view').addClass('loader');var o=$(a).data('type'),t=$(a).data('id'),i=$(a).data('extra'),n='./api/?action=tree&subaction=loadBranch&id='+t+'&type='+o+'&output=json';if(typeof i==='string'){jQuery.each(jQuery.parseJSON(i.replace(/'/g,'"')),function(e,a){n=n+'&'+e+'='+a})}
else if(typeof i==='object'){jQuery.each(i,function(e,a){n=n+'&'+e+'='+a})}
else{};$.getJSON(n,function(a){$(e).append('<ul class="or-navtree-list"/>');var n=$(e).children('ul').first(),i=a['output'];$.each(i['branch'],function(a,e){var i=$('<li class="or-navtree-node or-navtree-node--is-closed" data-id="'+e.internalId+'" data-type="'+e.type+'" data-extra="'+JSON.stringify(e.extraId).replace(/"/g,'\'')+'"><div class="tree or-navtree-node-control"><i class="tree-icon image-icon image-icon--node-closed"></i></div><div class="clickable"><a href="./?action='+e.action+'&id='+e.internalId+'" class="entry" data-extra="'+JSON.stringify(e.extraId).replace(/"/g,'\'')+'" data-id="'+e.internalId+'" data-action="'+e.action+'" data-type="open" title="'+e.description+'"><i class="image-icon image-icon--action-'+e['icon']+'"></i> '+e.text+'</a></div></li>');$(n).append(i);$(i).orTree();$(i).find('.clickable').orLinkify();$(i).find('.clickable a').click(function(e){e.preventDefault()})});$(n).slideDown('fast')}).fail(function(){}).always(function(){$(e).closest('div.view').removeClass('loader')});$(a).addClass('or-navtree-node--is-open').removeClass('or-navtree-node--is-closed').find('.tree-icon').addClass('image-icon--node-open').removeClass('image-icon--node-closed')}})})};