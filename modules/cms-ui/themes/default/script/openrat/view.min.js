;Openrat.View=function(t,r,i,n){this.action=t;this.method=r;this.id=i;this.params=n;this.before=function(){};this.start=function(e){this.before();this.element=e;this.loadView()};this.afterLoad=function(){};this.close=function(){};function a(e){afterViewLoaded(e)};this.loadView=function(){let e=Openrat.View.createUrl(this.action,this.method,this.id,this.params);let element=this.element;let view=this;$(this.element).empty().fadeTo(1,0.7).addClass('loader').html('').load(e,function(t,i,r){$(element).fadeTo(350,1);$(element).removeClass('loader');$(element).find('form').each(function(){let form=new Openrat.Form();form.close=function(){view.close()};form.initOnElement(this)});if(i=='error'){$(element).html('');Openrat.Workbench.notify('','','error','Server Error',['Server Error while requesting url '+e,t]);return};a(element)})};Openrat.View.createUrl=function(t,subaction,i,extraid={}){var e='./';e+='?';if(t)e+='&action='+t;if(subaction)e+='&subaction='+subaction;if(i)e+='&id='+i;if(typeof extraid==='string'){extraid=extraid.replace(/'/g,'"');var o=jQuery.parseJSON(extraid);jQuery.each(o,function(t,i){e=e+'&'+t+'='+i})}
else if(typeof extraid==='object'){jQuery.each(extraid,function(t,i){e=e+'&'+t+'='+i})}
else{};return e}};