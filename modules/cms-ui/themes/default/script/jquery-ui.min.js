/*! jQuery UI - v1.12.1 - 2018-09-03
* http://jqueryui.com
* Includes: widget.js, data.js, scroll-parent.js, widgets/sortable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}
else{t(jQuery)}}(function(t){t.ui=t.ui||{};var c=t.ui.version="1.12.1";
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
;var s=0,i=Array.prototype.slice;t.cleanData=(function(e){return function(i){var s,n,o;for(o=0;(n=i[o])!=null;o++){try{s=t._data(n,"events");if(s&&s.remove){t(n).triggerHandler("remove")}}catch(r){}};e(i)}})(t.cleanData);t.widget=function(e,i,s){var r,n,h,l={};var o=e.split(".")[0];e=e.split(".")[1];var a=o+"-"+e;if(!s){s=i;i=t.Widget};if(t.isArray(s)){s=t.extend.apply(null,[{}].concat(s))};t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)};t[o]=t[o]||{};r=t[o][e];n=t[o][e]=function(t,e){if(!this._createWidget){return new n(t,e)};if(arguments.length){this._createWidget(t,e)}};t.extend(n,r,{version:s.version,_proto:t.extend({},s),_childConstructors:[]});h=new i();h.options=t.widget.extend({},h.options);t.each(s,function(e,s){if(!t.isFunction(s)){l[e]=s;return};l[e]=(function(){function t(){return i.prototype[e].apply(this,arguments)};function n(t){return i.prototype[e].apply(this,t)};return function(){var i=this._super,o=this._superApply,e;this._super=t;this._superApply=n;e=s.apply(this,arguments);this._super=i;this._superApply=o;return e}})()});n.prototype=t.widget.extend(h,{widgetEventPrefix:r?(h.widgetEventPrefix||e):e},l,{constructor:n,namespace:o,widgetName:e,widgetFullName:a});if(r){t.each(r._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,n,i._proto)});delete r._childConstructors}
else{i._childConstructors.push(n)};t.widget.bridge(e,n);return n};t.widget.extend=function(e){var r=i.call(arguments,1),o=0,h=r.length,s,n;for(;o<h;o++){for(s in r[o]){n=r[o][s];if(r[o].hasOwnProperty(s)&&n!==undefined){if(t.isPlainObject(n)){e[s]=t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n)}
else{e[s]=n}}}};return e};t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a=typeof o==="string",h=i.call(arguments,1),r=this;if(a){if(!this.length&&o==="instance"){r=undefined}
else{this.each(function(){var i,s=t.data(this,n);if(o==="instance"){r=s;return!1};if(!s){return t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")};if(!t.isFunction(s[o])||o.charAt(0)==="_"){return t.error("no such method '"+o+"' for "+e+" widget instance")};i=s[o].apply(s,h);if(i!==s&&i!==undefined){r=i&&i.jquery?r.pushStack(i.get()):i;return!1}})}}
else{if(h.length){o=t.widget.extend.apply(null,[o].concat(h))};this.each(function(){var e=t.data(this,n);if(e){e.option(o||{});if(e._init){e._init()}}
else{t.data(this,n,new s(o,this))}})};return r}};t.Widget=function(){};t.Widget._childConstructors=[];t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0];this.element=t(i);this.uuid=s++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=t();this.hoverable=t();this.focusable=t();this.classesElementLookup={};if(i!==this){t.data(i,this.widgetFullName,this);this._on(!0,this.element,{remove:function(t){if(t.target===i){this.destroy()}}});this.document=t(i.style?i.ownerDocument:i.document||i);this.window=t(this.document[0].defaultView||this.document[0].parentWindow)};this.options=t.widget.extend({},this.options,this._getCreateOptions(),e);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)};this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy();t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var r=e,s,n,o;if(arguments.length===0){return t.widget.extend({},this.options)};if(typeof e==="string"){r={};s=e.split(".");e=s.shift();if(s.length){n=r[e]=t.widget.extend({},this.options[e]);for(o=0;o<s.length-1;o++){n[s[o]]=n[s[o]]||{};n=n[s[o]]};e=s.pop();if(arguments.length===1){return n[e]===undefined?null:n[e]};n[e]=i}
else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]};r[e]=i}};this._setOptions(r);return this},_setOptions:function(t){var e;for(e in t){this._setOption(e,t[e])};return this},_setOption:function(t,e){if(t==="classes"){this._setOptionClasses(e)};this.options[t]=e;if(t==="disabled"){this._setOptionDisabled(e)};return this},_setOptionClasses:function(e){var i,n,s;for(i in e){s=this.classesElementLookup[i];if(e[i]===this.options.classes[i]||!s||!s.length){continue};n=t(s.get());this._removeClass(s,i);n.addClass(this._classes({element:n,keys:i,classes:e,add:!0}))}},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;e=t.extend({element:this.element,classes:this.options.classes||{}},e);function n(n,o){var h,r;for(r=0;r<n.length;r++){h=s.classesElementLookup[n[r]]||t();if(e.add){h=t(t.unique(h.get().concat(e.element.get())))}
else{h=t(h.not(e.element).get())};s.classesElementLookup[n[r]]=h;i.push(n[r]);if(o&&e.classes[n[r]]){i.push(e.classes[n[r]])}}};this._on(e.element,{"remove":"_untrackClassesElement"});if(e.keys){n(e.keys.match(/\S+/g)||[],!0)};if(e.extra){n(e.extra.match(/\S+/g)||[])};return i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){if(t.inArray(e.target,n)!==-1){i.classesElementLookup[s]=t(n.not(e.target).get())}})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s=(typeof s==="boolean")?s:i;var n=(typeof t==="string"||t===null),o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};o.element.toggleClass(this._classes(o),s);return this},_on:function(e,i,s){var o,n=this;if(typeof e!=="boolean"){s=i;i=e;e=!1};if(!s){s=i;i=this.element;o=this.widget()}
else{i=o=t(i);this.bindings=this.bindings.add(i)};t.each(s,function(s,r){function h(){if(!e&&(n.options.disabled===!0||t(this).hasClass("ui-state-disabled"))){return};return(typeof r==="string"?n[r]:r).apply(n,arguments)};if(typeof r!=="string"){h.guid=r.guid=r.guid||h.guid||t.guid++};var a=s.match(/^([\w:-]*)\s*(.*)$/),l=a[1]+n.eventNamespace,c=a[2];if(c){o.on(l,c,h)}
else{i.on(l,h)}})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.off(i).off(i);this.bindings=t(this.bindings.not(e).get());this.focusable=t(this.focusable.not(e).get());this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function s(){return(typeof t==="string"?i[t]:t).apply(i,arguments)};var i=this;return setTimeout(s,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,r=this.options[e];s=s||{};i=t.Event(i);i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();i.target=this.element[0];o=i.originalEvent;if(o){for(n in o){if(!(n in i)){i[n]=o[n]}}};this.element.trigger(i,s);return!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}};t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){if(typeof n==="string"){n={effect:n}};var h,r=!n?e:n===!0||typeof n==="number"?i:n.effect||i;n=n||{};if(typeof n==="number"){n={duration:n}};h=!t.isEmptyObject(n);n.complete=o;if(n.delay){s.delay(n.delay)};if(h&&t.effects&&t.effects.effect[r]){s[e](n)}
else if(r!==e&&s[r]){s[r](n.duration,n.easing,o)}
else{s.queue(function(i){t(this)[e]();if(o){o.call(s[0])};i()})}}});var l=t.widget;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
;var a=t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}});
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
;var r=t.fn.scrollParent=function(e){var i=this.css("position"),n=i==="absolute",o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var e=t(this);if(n&&e.css("position")==="static"){return!1};return o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return i==="fixed"||!s.length?t(this[0].ownerDocument||document):s},h=t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
;var e=!1;t(document).on("mouseup",function(){e=!1});var o=t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent")){t.removeData(i.target,e.widgetName+".preventClickEvent");i.stopImmediatePropagation();return!1}});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(i){if(e){return};this._mouseMoved=!1;(this._mouseStarted&&this._mouseUp(i));this._mouseDownEvent=i;var s=this,n=(i.which===1),o=(typeof this.options.cancel==="string"&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1);if(!n||o||!this._mouseCapture(i)){return!0};this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)};if(this._mouseDistanceMet(i)&&this._mouseDelayMet(i)){this._mouseStarted=(this._mouseStart(i)!==!1);if(!this._mouseStarted){i.preventDefault();return!0}};if(!0===t.data(i.target,this.widgetName+".preventClickEvent")){t.removeData(i.target,this.widgetName+".preventClickEvent")};this._mouseMoveDelegate=function(t){return s._mouseMove(t)};this._mouseUpDelegate=function(t){return s._mouseUp(t)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);i.preventDefault();e=!0;return!0},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}
else if(!e.which){if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey){this.ignoreMissingWhich=!0}
else if(!this.ignoreMissingWhich){return this._mouseUp(e)}}};if(e.which||e.button){this._mouseMoved=!0};if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()};if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,e)!==!1);(this._mouseStarted?this._mouseDrag(e):this._mouseUp(e))};return!this._mouseStarted},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=!1;if(i.target===this._mouseDownEvent.target){t.data(i.target,this.widgetName+".preventClickEvent",!0)};this._mouseStop(i)};if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer};this.ignoreMissingWhich=!1;e=!1;i.preventDefault()},_mouseDistanceMet:function(t){return(Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
;var n=t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return(t>=e)&&(t<(e+i))},_isFloating:function(t){return(/left|right/).test(t.css("float"))||(/inline|table-cell/).test(t.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")};return this},_mouseCapture:function(e,i){var s=null,o=!1,n=this;if(this.reverting){return!1};if(this.options.disabled||this.options.type==="static"){return!1};this._refreshItems(e);t(e.target).parents().each(function(){if(t.data(this,n.widgetName+"-item")===n){s=t(this);return!1}});if(t.data(e.target,n.widgetName+"-item")===n){s=t(e.target)};if(!s){return!1};if(this.options.handle&&!i){t(this.options.handle,s).find("*").addBack().each(function(){if(this===e.target){o=!0}});if(!o){return!1}};this.currentItem=s;this._removeCurrentsFromItems();return!0},_mouseStart:function(e,i,s){var o,r,n=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;(n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()};this._createPlaceholder();if(n.containment){this._setContainment()};if(n.cursor&&n.cursor!=="auto"){r=this.document.find("body");this.storedCursor=r.css("cursor");r.css("cursor",n.cursor);this.storedStylesheet=t("<style>*{ cursor: "+n.cursor+" !important; }</style>").appendTo(r)};if(n.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")};this.helper.css("opacity",n.opacity)};if(n.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")};this.helper.css("zIndex",n.zIndex)};if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()};this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()};if(!s){for(o=this.containers.length-1;o>=0;o--){this.containers[o]._trigger("activate",e,this._uiHash(this))}};if(t.ui.ddmanager){t.ui.ddmanager.current=this};if(t.ui.ddmanager&&!n.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)};this.dragging=!0;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(e);return!0},_mouseDrag:function(e){var r,n,o,h,i=this.options,s=!1;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs};if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-e.pageY<i.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed}
else if(e.pageY-this.overflowOffset.top<i.scrollSensitivity){this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed};if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-e.pageX<i.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed}
else if(e.pageX-this.overflowOffset.left<i.scrollSensitivity){this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed}}
else{if(e.pageY-this.document.scrollTop()<i.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()-i.scrollSpeed)}
else if(this.window.height()-(e.pageY-this.document.scrollTop())<i.scrollSensitivity){s=this.document.scrollTop(this.document.scrollTop()+i.scrollSpeed)};if(e.pageX-this.document.scrollLeft()<i.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()-i.scrollSpeed)}
else if(this.window.width()-(e.pageX-this.document.scrollLeft())<i.scrollSensitivity){s=this.document.scrollLeft(this.document.scrollLeft()+i.scrollSpeed)}};if(s!==!1&&t.ui.ddmanager&&!i.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}};this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"};if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"};for(r=this.items.length-1;r>=0;r--){n=this.items[r];o=n.item[0];h=this._intersectsWithPointer(n);if(!h){continue};if(n.instance!==this.currentContainer){continue};if(o!==this.currentItem[0]&&this.placeholder[h===1?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&(this.options.type==="semi-dynamic"?!t.contains(this.element[0],o):!0)){this.direction=h===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(e,n)}
else{break};this._trigger("change",e,this._uiHash());break}};this._contactContainers(e);if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)};this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(e,i){if(!e){return};if(t.ui.ddmanager&&!this.options.dropBehaviour){t.ui.ddmanager.drop(this,e)};if(this.options.revert){var r=this,o=this.placeholder.offset(),s=this.options.axis,n={};if(!s||s==="x"){n.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)};if(!s||s==="y"){n.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)};this.reverting=!0;t(this.helper).animate(n,parseInt(this.options.revert,10)||500,function(){r._clear(e)})}
else{this._clear(e,i)};return!1},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}
else{this.currentItem.show()};for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}};if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])};if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()};t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null});if(this.domPosition.prev){t(this.domPosition.prev).after(this.currentItem)}
else{t(this.domPosition.parent).prepend(this.currentItem)}};return this},serialize:function(e){var s=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};t(s).each(function(){var s=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||(/(.+)[\-=_](.+)/));if(s){i.push((e.key||s[1]+"[]")+"="+(e.key&&e.expression?s[1]:s[2]))}});if(!i.length&&e.key){i.push(e.key+"=")};return i.join("&")},toArray:function(e){var s=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};s.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")});return i},_intersectsWith:function(t){var e=this.positionAbs.left,l=e+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,s=t.left,o=s+t.width,n=t.top,r=n+t.height,h=this.offset.click.top,a=this.offset.click.left,f=(this.options.axis==="x")||((i+h)>n&&(i+h)<r),u=(this.options.axis==="y")||((e+a)>s&&(e+a)<o),p=f&&u;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"])){return p}
else{return(s<e+(this.helperProportions.width/2)&&l-(this.helperProportions.width/2)<o&&n<i+(this.helperProportions.height/2)&&c-(this.helperProportions.height/2)<r)}},_intersectsWithPointer:function(t){var e,i,s=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;if(!o){return!1};e=this._getDragVerticalDirection();i=this._getDragHorizontalDirection();return this.floating?((i==="right"||e==="down")?2:1):(e&&(e==="down"?2:1))},_intersectsWithSides:function(t){var s=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+(t.height/2),t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+(t.width/2),t.width),e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();if(this.floating&&i){return((i==="right"&&n)||(i==="left"&&!n))}
else{return e&&((e==="down"&&s)||(e==="up"&&!s))}},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var s,n,r,i,a=[],o=[],h=this._connectWith();if(h&&e){for(s=h.length-1;s>=0;s--){r=t(h[s],this.document[0]);for(n=r.length-1;n>=0;n--){i=t.data(r[n],this.widgetFullName);if(i&&i!==this&&!i.options.disabled){o.push([t.isFunction(i.options.items)?i.options.items.call(i.element):t(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}}}};o.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function l(){a.push(this)};for(s=o.length-1;s>=0;s--){o[s][0].each(l)};return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++){if(e[i]===t.item[0]){return!1}};return!0})},_refreshItems:function(e){this.items=[];this.containers=[this];var s,n,r,i,h,a,l,f,u=this.items,o=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready){for(s=c.length-1;s>=0;s--){r=t(c[s],this.document[0]);for(n=r.length-1;n>=0;n--){i=t.data(r[n],this.widgetFullName);if(i&&i!==this&&!i.options.disabled){o.push([t.isFunction(i.options.items)?i.options.items.call(i.element[0],e,{item:this.currentItem}):t(i.options.items,i.element),i]);this.containers.push(i)}}}};for(s=o.length-1;s>=0;s--){h=o[s][1];a=o[s][0];for(n=0,f=a.length;n<f;n++){l=t(a[n]);l.data(this.widgetName+"-item",h);u.push({item:l,instance:h,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()};var i,s,o,n;for(i=this.items.length-1;i>=0;i--){s=this.items[i];if(s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]){continue};o=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;if(!e){s.width=o.outerWidth();s.height=o.outerHeight()};n=o.offset();s.left=n.left;s.top=n.top};if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}
else{for(i=this.containers.length-1;i>=0;i--){n=this.containers[i].element.offset();this.containers[i].containerCache.left=n.left;this.containers[i].containerCache.top=n.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}};return this},_createPlaceholder:function(e){e=e||this;var s,i=e.options;if(!i.placeholder||i.placeholder.constructor===String){s=i.placeholder;i.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),i=t("<"+n+">",e.document[0]);e._addClass(i,"ui-sortable-placeholder",s||e.currentItem[0].className)._removeClass(i,"ui-sortable-helper");if(n==="tbody"){e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(i))}
else if(n==="tr"){e._createTrPlaceholder(e.currentItem,i)}
else if(n==="img"){i.attr("src",e.currentItem.attr("src"))};if(!s){i.css("visibility","hidden")};return i},update:function(t,n){if(s&&!i.forcePlaceholderSize){return};if(!n.height()){n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10))};if(!n.width()){n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}};e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var s,n,c,o,u,p,h,f,a,l,r=null,i=null;for(s=this.containers.length-1;s>=0;s--){if(t.contains(this.currentItem[0],this.containers[s].element[0])){continue};if(this._intersectsWith(this.containers[s].containerCache)){if(r&&t.contains(this.containers[s].element[0],r.element[0])){continue};r=this.containers[s];i=s}
else{if(this.containers[s].containerCache.over){this.containers[s]._trigger("out",e,this._uiHash(this));this.containers[s].containerCache.over=0}}};if(!r){return};if(this.containers.length===1){if(!this.containers[i].containerCache.over){this.containers[i]._trigger("over",e,this._uiHash(this));this.containers[i].containerCache.over=1}}
else{c=10000;o=null;a=r.floating||this._isFloating(this.currentItem);u=a?"left":"top";p=a?"width":"height";l=a?"pageX":"pageY";for(n=this.items.length-1;n>=0;n--){if(!t.contains(this.containers[i].element[0],this.items[n].item[0])){continue};if(this.items[n].item[0]===this.currentItem[0]){continue};h=this.items[n].item.offset()[u];f=!1;if(e[l]-h>this.items[n][p]/2){f=!0};if(Math.abs(e[l]-h)<c){c=Math.abs(e[l]-h);o=this.items[n];this.direction=f?"up":"down"}};if(!o&&!this.options.dropOnEmpty){return};if(this.currentContainer===this.containers[i]){if(!this.currentContainer.containerCache.over){this.containers[i]._trigger("over",e,this._uiHash());this.currentContainer.containerCache.over=1};return};o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[i].element,!0);this._trigger("change",e,this._uiHash());this.containers[i]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[i];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[i]._trigger("over",e,this._uiHash(this));this.containers[i].containerCache.over=1}},_createHelper:function(e){var s=this.options,i=t.isFunction(s.helper)?t(s.helper.apply(this.element[0],[e,this.currentItem])):(s.helper==="clone"?this.currentItem.clone():this.currentItem);if(!i.parents("body").length){t(s.appendTo!=="parent"?s.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0])};if(i[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}};if(!i[0].style.width||s.forceHelperSize){i.width(this.currentItem.width())};if(!i[0].style.height||s.forceHelperSize){i.height(this.currentItem.height())};return i},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")};if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}};if("left" in e){this.offset.click.left=e.left+this.margins.left};if("right" in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left};if("top" in e){this.offset.click.top=e.top+this.margins.top};if("bottom" in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()};if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&t.ui.ie)){e={top:0,left:0}};return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}
else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,s,n,i=this.options;if(i.containment==="parent"){i.containment=this.helper[0].parentNode};if(i.containment==="document"||i.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,i.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?(this.document.height()||document.body.parentNode.scrollHeight):this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]};if(!(/^(document|window|parent)$/).test(i.containment)){e=t(i.containment)[0];s=t(i.containment).offset();n=(t(e).css("overflow")!=="hidden");this.containment=[s.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,s.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){if(!i){i=this.position};var s=e==="absolute"?1:-1,n=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=(/(html|body)/i).test(n[0].tagName);return{top:(i.top+this.offset.relative.top*s+this.offset.parent.top*s-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(o?0:n.scrollTop()))*s)),left:(i.left+this.offset.relative.left*s+this.offset.parent.left*s-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s))}},_generatePosition:function(e){var s,n,i=this.options,o=e.pageX,r=e.pageY,h=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=(/(html|body)/i).test(h[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()};if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){o=this.containment[0]+this.offset.click.left};if(e.pageY-this.offset.click.top<this.containment[1]){r=this.containment[1]+this.offset.click.top};if(e.pageX-this.offset.click.left>this.containment[2]){o=this.containment[2]+this.offset.click.left};if(e.pageY-this.offset.click.top>this.containment[3]){r=this.containment[3]+this.offset.click.top}};if(i.grid){s=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1];r=this.containment?((s-this.offset.click.top>=this.containment[1]&&s-this.offset.click.top<=this.containment[3])?s:((s-this.offset.click.top>=this.containment[1])?s-i.grid[1]:s+i.grid[1])):s;n=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment?((n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2])?n:((n-this.offset.click.left>=this.containment[0])?n-i.grid[0]:n+i.grid[0])):n}};return{top:(r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(a?0:h.scrollTop())))),left:(o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:h.scrollLeft())))}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?e.item[0]:e.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){if(n===this.counter){this.refreshPositions(!s)}})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)};this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}};this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}
else{this.currentItem.show()};if(this.fromOutside&&!e){s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})};if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!e){s.push(function(t){this._trigger("update",t,this._uiHash())})};if(this!==this.currentContainer){if(!e){s.push(function(t){this._trigger("remove",t,this._uiHash())});s.push((function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}).call(this,this.currentContainer));s.push((function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}).call(this,this.currentContainer))}};function n(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}};for(i=this.containers.length-1;i>=0;i--){if(!e){s.push(n("deactivate",this,this.containers[i]))};if(this.containers[i].containerCache.over){s.push(n("out",this,this.containers[i]));this.containers[i].containerCache.over=0}};if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()};if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)};if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)};this.dragging=!1;if(!e){this._trigger("beforeStop",t,this._uiHash())};this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()};this.helper=null};if(!e){for(i=0;i<s.length;i++){s[i].call(this,t)};this._trigger("stop",t,this._uiHash())};this.fromOutside=!1;return!this.cancelHelperRemoval},_trigger:function(){if(t.Widget.prototype._trigger.apply(this,arguments)===!1){this.cancel()}},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}));