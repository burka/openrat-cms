(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';var r={autoSelfClosers:{'area':!0,'base':!0,'br':!0,'col':!0,'command':!0,'embed':!0,'frame':!0,'hr':!0,'img':!0,'input':!0,'keygen':!0,'link':!0,'meta':!0,'param':!0,'source':!0,'track':!0,'wbr':!0,'menuitem':!0},implicitlyClosed:{'dd':!0,'li':!0,'optgroup':!0,'option':!0,'p':!0,'rp':!0,'rt':!0,'tbody':!0,'td':!0,'tfoot':!0,'th':!0,'tr':!0},contextGrabbers:{'dd':{'dd':!0,'dt':!0},'dt':{'dd':!0,'dt':!0},'li':{'li':!0},'option':{'option':!0,'optgroup':!0},'optgroup':{'optgroup':!0},'p':{'address':!0,'article':!0,'aside':!0,'blockquote':!0,'dir':!0,'div':!0,'dl':!0,'fieldset':!0,'footer':!0,'form':!0,'h1':!0,'h2':!0,'h3':!0,'h4':!0,'h5':!0,'h6':!0,'header':!0,'hgroup':!0,'hr':!0,'menu':!0,'nav':!0,'ol':!0,'p':!0,'pre':!0,'section':!0,'table':!0,'ul':!0},'rp':{'rp':!0,'rt':!0},'rt':{'rp':!0,'rt':!0},'tbody':{'tbody':!0,'tfoot':!0},'td':{'td':!0,'th':!0},'tfoot':{'tbody':!0},'th':{'td':!0,'th':!0},'thead':{'tbody':!0,'tfoot':!0},'tr':{'tr':!0}},doNotIndent:{'pre':!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0};var t={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode('xml',function(n,i){var c=n.indentUnit,o={};var x=i.htmlMode?r:t;for(var f in x)o[f]=x[f];for(var f in i)o[f]=i[f];var s,a;function l(e,t){function n(r){t.tokenize=r;return r(e,t)};var i=e.next();if(i=='<'){if(e.eat('!')){if(e.eat('[')){if(e.match('CDATA['))return n(g('atom',']]>'));else return null}
else if(e.match('--')){return n(g('comment','-->'))}
else if(e.match('DOCTYPE',!0,!0)){e.eatWhile(/[\w\._\-]/);return n(h(1))}
else{return null}}
else if(e.eat('?')){e.eatWhile(/[\w\._\-]/);t.tokenize=g('meta','?>');return'meta'}
else{s=e.eat('/')?'closeTag':'openTag';t.tokenize=m;return'tag bracket'}}
else if(i=='&'){var r;if(e.eat('#')){if(e.eat('x')){r=e.eatWhile(/[a-fA-F\d]/)&&e.eat(';')}
else{r=e.eatWhile(/[\d]/)&&e.eat(';')}}
else{r=e.eatWhile(/[\w\.\-:]/)&&e.eat(';')};return r?'atom':'error'}
else{e.eatWhile(/[^&<]/);return null}};l.isInText=!0;function m(e,t){var r=e.next();if(r=='>'||(r=='/'&&e.eat('>'))){t.tokenize=l;s=r=='>'?'endTag':'selfcloseTag';return'tag bracket'}
else if(r=='='){s='equals';return null}
else if(r=='<'){t.tokenize=l;t.state=d;t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+' tag error':'tag error'}
else if(/['"]/.test(r)){t.tokenize=N(r);t.stringStartCol=e.column();return t.tokenize(e,t)}
else{e.match(/^[^\s\u00a0=<>"']*[^\s\u00a0=<>"'\/]/);return'word'}};function N(e){var t=function(t,r){while(!t.eol()){if(t.next()==e){r.tokenize=m;break}};return'string'};t.isInAttribute=!0;return t};function g(e,t){return function(r,n){while(!r.eol()){if(r.match(t)){n.tokenize=l;break};r.next()};return e}};function h(e){return function(t,r){var n;while((n=t.next())!=null){if(n=='<'){r.tokenize=h(e+1);return r.tokenize(t,r)}
else if(n=='>'){if(e==1){r.tokenize=l;break}
else{r.tokenize=h(e-1);return r.tokenize(t,r)}}};return'meta'}};function T(e,t,r){this.prev=e.context;this.tagName=t;this.indent=e.indented;this.startOfLine=r;if(o.doNotIndent.hasOwnProperty(t)||(e.context&&e.context.noIndent))this.noIndent=!0};function p(e){if(e.context)e.context=e.context.prev};function k(e,t){var r;while(!0){if(!e.context){return};r=e.context.tagName;if(!o.contextGrabbers.hasOwnProperty(r)||!o.contextGrabbers[r].hasOwnProperty(t)){return};p(e)}};function d(e,t,r){if(e=='openTag'){r.tagStart=t.column();return w}
else if(e=='closeTag'){return C}
else{return d}};function w(e,t,r){if(e=='word'){r.tagName=t.current();a='tag';return u}
else{a='error';return w}};function C(e,t,r){if(e=='word'){var n=t.current();if(r.context&&r.context.tagName!=n&&o.implicitlyClosed.hasOwnProperty(r.context.tagName))p(r);if((r.context&&r.context.tagName==n)||o.matchClosing===!1){a='tag';return b}
else{a='tag error';return v}}
else{a='error';return v}};function b(e,t,r){if(e!='endTag'){a='error';return b};p(r);return d};function v(e,t,r){a='error';return b(e,t,r)};function u(e,t,r){if(e=='word'){a='attribute';return I}
else if(e=='endTag'||e=='selfcloseTag'){var n=r.tagName,i=r.tagStart;r.tagName=r.tagStart=null;if(e=='selfcloseTag'||o.autoSelfClosers.hasOwnProperty(n)){k(r,n)}
else{k(r,n);r.context=new T(r,n,i==r.indented)};return d};a='error';return u};function I(e,t,r){if(e=='equals')return y;if(!o.allowMissing)a='error';return u(e,t,r)};function y(e,t,r){if(e=='string')return z;if(e=='word'&&o.allowUnquoted){a='string';return u};a='error';return u(e,t,r)};function z(e,t,r){if(e=='string')return z;return u(e,t,r)};return{startState:function(e){var t={tokenize:l,state:d,indented:e||0,tagName:null,tagStart:null,context:null};if(e!=null)t.baseIndent=e;return t},token:function(e,t){if(!t.tagName&&e.sol())t.indented=e.indentation();if(e.eatSpace())return null;s=null;var r=t.tokenize(e,t);if((r||s)&&r!='comment'){a=null;t.state=t.state(s||r,e,t);if(a)r=a=='error'?r+' error':a};return r},indent:function(t,r,i){var n=t.context;if(t.tokenize.isInAttribute){if(t.tagStart==t.indented)return t.stringStartCol+1;else return t.indented+c};if(n&&n.noIndent)return e.Pass;if(t.tokenize!=m&&t.tokenize!=l)return i?i.match(/^(\s*)/)[0].length:0;if(t.tagName){if(o.multilineTagIndentPastTag!==!1)return t.tagStart+t.tagName.length+2;else return t.tagStart+c*(o.multilineTagIndentFactor||1)};if(o.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var a=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(a&&a[1]){while(n){if(n.tagName==a[2]){n=n.prev;break}
else if(o.implicitlyClosed.hasOwnProperty(n.tagName)){n=n.prev}
else{break}}}
else if(a){while(n){var u=o.contextGrabbers[n.tagName];if(u&&u.hasOwnProperty(a[2]))n=n.prev;else break}}
while(n&&n.prev&&!n.startOfLine)n=n.prev;if(n)return n.indent+c;else return t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:'<!--',blockCommentEnd:'-->',configuration:o.htmlMode?'html':'xml',helperType:o.htmlMode?'html':'xml',skipAttribute:function(e){if(e.state==y)e.state=u}}});e.defineMIME('text/xml','xml');e.defineMIME('application/xml','xml');if(!e.mimeModes.hasOwnProperty('text/html'))e.defineMIME('text/html',{name:'xml',htmlMode:!0})});