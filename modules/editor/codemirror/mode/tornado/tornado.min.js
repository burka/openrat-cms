(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'),require('../htmlmixed/htmlmixed'),require('../../addon/mode/overlay'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror','../htmlmixed/htmlmixed','../../addon/mode/overlay'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMode('tornado:inner',function(){var e=['and','as','assert','autoescape','block','break','class','comment','context','continue','datetime','def','del','elif','else','end','escape','except','exec','extends','false','finally','for','from','global','if','import','in','include','is','json_encode','lambda','length','linkify','load','module','none','not','or','pass','print','put','raise','raw','return','self','set','squeeze','super','true','try','url_escape','while','with','without','xhtml_escape','yield'];e=new RegExp('^(('+e.join(')|(')+'))\\b');function t(e,t){e.eatWhile(/[^\{]/);var o=e.next();if(o=='{'){if(o=e.eat(/\{|%|#/)){t.tokenize=n(o);return'tag'}}};function n(n){if(n=='{'){n='}'};return function(o,r){var i=o.next();if((i==n)&&o.eat('}')){r.tokenize=t;return'tag'};if(o.match(e)){return'keyword'};return n=='#'?'comment':'string'}};return{startState:function(){return{tokenize:t}},token:function(e,t){return t.tokenize(e,t)}}});e.defineMode('tornado',function(t){var n=e.getMode(t,'text/html'),o=e.getMode(t,'tornado:inner');return e.overlayMode(n,o)});e.defineMIME('text/x-tornado','tornado')});