(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("tiddlywiki",function(){var b={};var s={"allTags":!0,"closeAll":!0,"list":!0,"newJournal":!0,"newTiddler":!0,"permaview":!0,"saveChanges":!0,"search":!0,"slider":!0,"tabs":!0,"tag":!0,"tagging":!0,"tags":!0,"tiddler":!0,"timeline":!0,"today":!0,"version":!0,"option":!0,"with":!0,"filter":!0};var n=/[\w_\-]/i,i=/^\-\-\-\-+$/,u=/^\/\*\*\*$/,o=/^\*\*\*\/$/,a=/^<<<$/,f=/^\/\/\{\{\{$/,c=/^\/\/\}\}\}$/,l=/^<!--\{\{\{-->$/,m=/^<!--\}\}\}-->$/,h=/^\{\{\{$/,k=/^\}\}\}$/,d=/.*?\}\}\}/;function t(e,t,r){t.tokenize=r;return r(e,t)};function e(e,d){var s=e.sol(),k=e.peek();d.block=!1;if(s&&/[<\/\*{}\-]/.test(k)){if(e.match(h)){d.block=!0;return t(e,d,r)};if(e.match(a))return"quote";if(e.match(u)||e.match(o))return"comment";if(e.match(f)||e.match(c)||e.match(l)||e.match(m))return"comment";if(e.match(i))return"hr"};e.next();if(s&&/[\/\*!#;:>|]/.test(k)){if(k=="!"){e.skipToEnd();return"header"};if(k=="*"){e.eatWhile("*");return"comment"};if(k=="#"){e.eatWhile("#");return"comment"};if(k==";"){e.eatWhile(";");return"comment"};if(k==":"){e.eatWhile(":");return"comment"};if(k==">"){e.eatWhile(">");return"quote"};if(k=="|")return"header"};if(k=="{"&&e.match(/\{\{/))return t(e,d,r);if(/[hf]/i.test(k)&&/[ti]/i.test(e.peek())&&e.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i))return"link";if(k=="\"")return"string";if(k=="~")return"brace";if(/[\[\]]/.test(k)&&e.match(k))return"brace";if(k=="@"){e.eatWhile(n);return"link"};if(/\d/.test(k)){e.eatWhile(/\d/);return"number"};if(k=="/"){if(e.eat("%")){return t(e,d,p)}
else if(e.eat("/")){return t(e,d,v)}};if(k=="_"&&e.eat("_"))return t(e,d,x);if(k=="-"&&e.eat("-")){if(e.peek()!=" ")return t(e,d,z);if(e.peek()==" ")return"brace"};if(k=="'"&&e.eat("'"))return t(e,d,w);if(k=="<"&&e.eat("<"))return t(e,d,y);e.eatWhile(/[\w\$_]/);return b.propertyIsEnumerable(e.current())?"keyword":null};function p(t,r){var i=!1,n;while(n=t.next()){if(n=="/"&&i){r.tokenize=e;break};i=(n=="%")};return"comment"};function w(t,r){var i=!1,n;while(n=t.next()){if(n=="'"&&i){r.tokenize=e;break};i=(n=="'")};return"strong"};function r(t,r){var n=r.block;if(n&&t.current()){return"comment"};if(!n&&t.match(d)){r.tokenize=e;return"comment"};if(n&&t.sol()&&t.match(k)){r.tokenize=e;return"comment"};t.next();return"comment"};function v(t,r){var i=!1,n;while(n=t.next()){if(n=="/"&&i){r.tokenize=e;break};i=(n=="/")};return"em"};function x(t,r){var i=!1,n;while(n=t.next()){if(n=="_"&&i){r.tokenize=e;break};i=(n=="_")};return"underlined"};function z(t,r){var i=!1,n;while(n=t.next()){if(n=="-"&&i){r.tokenize=e;break};i=(n=="-")};return"strikethrough"};function y(t,r){if(t.current()=="<<"){return"macro"};var n=t.next();if(!n){r.tokenize=e;return null};if(n==">"){if(t.peek()==">"){t.next();r.tokenize=e;return"macro"}};t.eatWhile(/[\w\$_]/);return s.propertyIsEnumerable(t.current())?"keyword":null};return{startState:function(){return{tokenize:e}},token:function(e,t){if(e.eatSpace())return null;var r=t.tokenize(e,t);return r}}});e.defineMIME("text/x-tiddlywiki","tiddlywiki")});