(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMode('smarty',function(r,i){var s=i.rightDelimiter||'}',a=i.leftDelimiter||'{',u=i.version||2,o=e.getMode(r,i.baseMode||'null'),d=['debug','extends','function','include','literal'],n={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};var f;function t(e,t){f=t;return e};function p(e,t,r){t.tokenize=r;return r(e,t)};function h(e,t){if(t==null)t=e.pos;return u===3&&a=='{'&&(t==e.string.length||/\s/.test(e.string.charAt(t)))};function l(e,t){var i=e.string;for(var n=e.pos;;){var r=i.indexOf(a,n);n=r+a.length;if(r==-1||!h(e,r+a.length))break};if(r==e.pos){e.match(a);if(e.eat('*')){return p(e,t,k('comment','*'+s))}
else{t.depth++;t.tokenize=c;f='startTag';return'tag'}};if(r>-1)e.string=i.slice(0,r);var l=o.token(e,t.base);if(r>-1)e.string=i;return l};function c(e,r){if(e.match(s,!0)){if(u===3){r.depth--;if(r.depth<=0){r.tokenize=l}}
else{r.tokenize=l};return t('tag',null)};if(e.match(a,!0)){r.depth++;return t('tag','startTag')};var i=e.next();if(i=='$'){e.eatWhile(n.validIdentifier);return t('variable-2','variable')}
else if(i=='|'){return t('operator','pipe')}
else if(i=='.'){return t('operator','property')}
else if(n.stringChar.test(i)){r.tokenize=b(i);return t('string','string')}
else if(n.operatorChars.test(i)){e.eatWhile(n.operatorChars);return t('operator','operator')}
else if(i=='['||i==']'){return t('bracket','bracket')}
else if(i=='('||i==')'){return t('bracket','operator')}
else if(/\d/.test(i)){e.eatWhile(/\d/);return t('number','number')}
else{if(r.last=='variable'){if(i=='@'){e.eatWhile(n.validIdentifier);return t('property','property')}
else if(i=='|'){e.eatWhile(n.validIdentifier);return t('qualifier','modifier')}}
else if(r.last=='pipe'){e.eatWhile(n.validIdentifier);return t('qualifier','modifier')}
else if(r.last=='whitespace'){e.eatWhile(n.validIdentifier);return t('attribute','modifier')};if(r.last=='property'){e.eatWhile(n.validIdentifier);return t('property',null)}
else if(/\s/.test(i)){f='whitespace';return null};var c='';if(i!='/'){c+=i};var p=null;while(p=e.eat(n.validIdentifier)){c+=p};for(var o=0,h=d.length;o<h;o++){if(d[o]==c){return t('keyword','keyword')}};if(/\s/.test(i)){return null};return t('tag','tag')}};function b(e){return function(t,r){var i=null,n=null;while(!t.eol()){n=t.peek();if(t.next()==e&&i!=='\\'){r.tokenize=c;break};i=n};return'string'}};function k(e,t){return function(r,i){while(!r.eol()){if(r.match(t)){i.tokenize=l;break};r.next()};return e}};return{startState:function(){return{base:e.startState(o),tokenize:l,last:null,depth:0}},copyState:function(t){return{base:e.copyState(o,t.base),tokenize:t.tokenize,last:t.last,depth:t.depth}},innerMode:function(e){if(e.tokenize==l)return{mode:o,state:e.base}},token:function(e,t){var r=t.tokenize(e,t);t.last=f;return r},indent:function(t,r){if(t.tokenize==l&&o.indent)return o.indent(t.base,r);else return e.Pass},blockCommentStart:a+'*',blockCommentEnd:'*'+s}});e.defineMIME('text/x-smarty','smarty')});