(function(e){'use strict';if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(window.CodeMirror)})(function(e){'use strict';e.defineMode('powershell',function(){function t(e,t){t=t||{};var n=t.prefix!==undefined?t.prefix:'^',i=t.suffix!==undefined?t.suffix:'\\b';for(var r=0;r<e.length;r++){if(e[r]instanceof RegExp){e[r]=e[r].source}
else{e[r]=e[r].replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')}};return new RegExp(n+'('+e.join('|')+')'+i,'i')};var a='(?=[^A-Za-z\\d\\-_]|$)',n=/[\w\-:]/,k=t([/begin|break|catch|continue|data|default|do|dynamicparam/,/else|elseif|end|exit|filter|finally|for|foreach|from|function|if|in/,/param|process|return|switch|throw|trap|try|until|where|while/],{suffix:a});var C=/[\[\]{},;`\.]|@[({]/,h=t(['f',/b?not/,/[ic]?split/,'join',/is(not)?/,'as',/[ic]?(eq|ne|[gl][te])/,/[ic]?(not)?(like|match|contains)/,/[ic]?replace/,/b?(and|or|xor)/],{prefix:'-'});var b=/[+\-*\/%]=|\+\+|--|\.\.|[+\-*&^%:=!|\/]|<(?!#)|(?!#)>/,g=t([h,b],{suffix:''});var S=/^((0x[\da-f]+)|((\d+\.\d+|\d\.|\.\d+|\d+)(e[\+\-]?\d+)?))[ld]?([kmgtp]b)?/i,d=/^[A-Za-z\_][A-Za-z\-\_\d]*\b/,P=/[A-Z]:|%|\?/i,v=t([/Add-(Computer|Content|History|Member|PSSnapin|Type)/,/Checkpoint-Computer/,/Clear-(Content|EventLog|History|Host|Item(Property)?|Variable)/,/Compare-Object/,/Complete-Transaction/,/Connect-PSSession/,/ConvertFrom-(Csv|Json|SecureString|StringData)/,/Convert-Path/,/ConvertTo-(Csv|Html|Json|SecureString|Xml)/,/Copy-Item(Property)?/,/Debug-Process/,/Disable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/Disconnect-PSSession/,/Enable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/(Enter|Exit)-PSSession/,/Export-(Alias|Clixml|Console|Counter|Csv|FormatData|ModuleMember|PSSession)/,/ForEach-Object/,/Format-(Custom|List|Table|Wide)/,new RegExp('Get-(Acl|Alias|AuthenticodeSignature|ChildItem|Command|ComputerRestorePoint|Content|ControlPanelItem|Counter|Credential|Culture|Date|Event|EventLog|EventSubscriber|ExecutionPolicy|FormatData|Help|History|Host|HotFix|Item|ItemProperty|Job|Location|Member|Module|PfxCertificate|Process|PSBreakpoint|PSCallStack|PSDrive|PSProvider|PSSession|PSSessionConfiguration|PSSnapin|Random|Service|TraceSource|Transaction|TypeData|UICulture|Unique|Variable|Verb|WinEvent|WmiObject)'),/Group-Object/,/Import-(Alias|Clixml|Counter|Csv|LocalizedData|Module|PSSession)/,/ImportSystemModules/,/Invoke-(Command|Expression|History|Item|RestMethod|WebRequest|WmiMethod)/,/Join-Path/,/Limit-EventLog/,/Measure-(Command|Object)/,/Move-Item(Property)?/,new RegExp('New-(Alias|Event|EventLog|Item(Property)?|Module|ModuleManifest|Object|PSDrive|PSSession|PSSessionConfigurationFile|PSSessionOption|PSTransportOption|Service|TimeSpan|Variable|WebServiceProxy|WinEvent)'),/Out-(Default|File|GridView|Host|Null|Printer|String)/,/Pause/,/(Pop|Push)-Location/,/Read-Host/,/Receive-(Job|PSSession)/,/Register-(EngineEvent|ObjectEvent|PSSessionConfiguration|WmiEvent)/,/Remove-(Computer|Event|EventLog|Item(Property)?|Job|Module|PSBreakpoint|PSDrive|PSSession|PSSnapin|TypeData|Variable|WmiObject)/,/Rename-(Computer|Item(Property)?)/,/Reset-ComputerMachinePassword/,/Resolve-Path/,/Restart-(Computer|Service)/,/Restore-Computer/,/Resume-(Job|Service)/,/Save-Help/,/Select-(Object|String|Xml)/,/Send-MailMessage/,new RegExp('Set-(Acl|Alias|AuthenticodeSignature|Content|Date|ExecutionPolicy|Item(Property)?|Location|PSBreakpoint|PSDebug|PSSessionConfiguration|Service|StrictMode|TraceSource|Variable|WmiInstance)'),/Show-(Command|ControlPanelItem|EventLog)/,/Sort-Object/,/Split-Path/,/Start-(Job|Process|Service|Sleep|Transaction|Transcript)/,/Stop-(Computer|Job|Process|Service|Transcript)/,/Suspend-(Job|Service)/,/TabExpansion2/,/Tee-Object/,/Test-(ComputerSecureChannel|Connection|ModuleManifest|Path|PSSessionConfigurationFile)/,/Trace-Command/,/Unblock-File/,/Undo-Transaction/,/Unregister-(Event|PSSessionConfiguration)/,/Update-(FormatData|Help|List|TypeData)/,/Use-Transaction/,/Wait-(Event|Job|Process)/,/Where-Object/,/Write-(Debug|Error|EventLog|Host|Output|Progress|Verbose|Warning)/,/cd|help|mkdir|more|oss|prompt/,/ac|asnp|cat|cd|chdir|clc|clear|clhy|cli|clp|cls|clv|cnsn|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|dnsn|ebp/,/echo|epal|epcsv|epsn|erase|etsn|exsn|fc|fl|foreach|ft|fw|gal|gbp|gc|gci|gcm|gcs|gdr|ghy|gi|gjb|gl|gm|gmo|gp|gps/,/group|gsn|gsnp|gsv|gu|gv|gwmi|h|history|icm|iex|ihy|ii|ipal|ipcsv|ipmo|ipsn|irm|ise|iwmi|iwr|kill|lp|ls|man|md/,/measure|mi|mount|move|mp|mv|nal|ndr|ni|nmo|npssc|nsn|nv|ogv|oh|popd|ps|pushd|pwd|r|rbp|rcjb|rcsn|rd|rdr|ren|ri/,/rjb|rm|rmdir|rmo|rni|rnp|rp|rsn|rsnp|rujb|rv|rvpa|rwmi|sajb|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls/,/sort|sp|spjb|spps|spsv|start|sujb|sv|swmi|tee|trcm|type|where|wjb|write/],{prefix:'',suffix:''});var f=t([/[$?^_]|Args|ConfirmPreference|ConsoleFileName|DebugPreference|Error|ErrorActionPreference|ErrorView|ExecutionContext/,/FormatEnumerationLimit|Home|Host|Input|MaximumAliasCount|MaximumDriveCount|MaximumErrorCount|MaximumFunctionCount/,/MaximumHistoryCount|MaximumVariableCount|MyInvocation|NestedPromptLevel|OutputEncoding|Pid|Profile|ProgressPreference/,/PSBoundParameters|PSCommandPath|PSCulture|PSDefaultParameterValues|PSEmailServer|PSHome|PSScriptRoot|PSSessionApplicationName/,/PSSessionConfigurationName|PSSessionOption|PSUICulture|PSVersionTable|Pwd|ShellId|StackTrace|VerbosePreference/,/WarningPreference|WhatIfPreference/,/Event|EventArgs|EventSubscriber|Sender/,/Matches|Ofs|ForEach|LastExitCode|PSCmdlet|PSItem|PSSenderInfo|This/,/true|false|null/],{prefix:'\\$',suffix:''});var m=t([P,v,f],{suffix:a});var o={keyword:k,number:S,operator:g,builtin:m,punctuation:C,identifier:d};function e(e,t){var u=t.returnStack[t.returnStack.length-1];if(u&&u.shouldReturnFrom(t)){t.tokenize=u.tokenize;t.returnStack.pop();return t.tokenize(e,t)};if(e.eatSpace()){return null};if(e.eat('(')){t.bracketNesting+=1;return'punctuation'};if(e.eat(')')){t.bracketNesting-=1;return'punctuation'};for(var p in o){if(e.match(o[p])){return p}};var a=e.next();if(a==='\''){return x(e,t)};if(a==='$'){return i(e,t)};if(a==='"'){return s(e,t)};if(a==='<'&&e.eat('#')){t.tokenize=c;return c(e,t)};if(a==='#'){e.skipToEnd();return'comment'};if(a==='@'){var l=e.eat(/["']/);if(l&&e.eol()){t.tokenize=r;t.startQuote=l[0];return r(e,t)}
else if(e.eol()){return'error'}
else if(e.peek().match(/[({]/)){return'punctuation'}
else if(e.peek().match(n)){return i(e,t)}};return'error'};function x(t,r){var n;while((n=t.peek())!=null){t.next();if(n==='\''&&!t.eat('\'')){r.tokenize=e;return'string'}};return'error'};function s(t,r){var n;while((n=t.peek())!=null){if(n==='$'){r.tokenize=E;return'string'};t.next();if(n==='`'){t.next();continue};if(n==='"'&&!t.eat('"')){r.tokenize=e;return'string'}};return'error'};function E(e,t){return u(e,t,s)};function w(e,t){t.tokenize=r;t.startQuote='"';return r(e,t)};function y(e,t){return u(e,t,w)};function u(r,t,n){if(r.match('$(')){var o=t.bracketNesting;t.returnStack.push({shouldReturnFrom:function(e){return e.bracketNesting===o},tokenize:n});t.tokenize=e;t.bracketNesting+=1;return'punctuation'}
else{r.next();t.returnStack.push({shouldReturnFrom:function(){return!0},tokenize:n});t.tokenize=i;return t.tokenize(r,t)}};function c(t,r){var i=!1,n;while((n=t.next())!=null){if(i&&n=='>'){r.tokenize=e;break};i=(n==='#')};return'comment'};function i(t,r){var i=t.peek();if(t.eat('{')){r.tokenize=l;return l(t,r)}
else if(i!=undefined&&i.match(n)){t.eatWhile(n);r.tokenize=e;return'variable-2'}
else{r.tokenize=e;return'error'}};function l(t,r){var n;while((n=t.next())!=null){if(n==='}'){r.tokenize=e;break}};return'variable-2'};function r(t,r){var i=r.startQuote;if(t.sol()&&t.match(new RegExp(i+'@'))){r.tokenize=e}
else if(i==='"'){while(!t.eol()){var n=t.peek();if(n==='$'){r.tokenize=y;return'string'};t.next();if(n==='`'){t.next()}}}
else{t.skipToEnd()};return'string'};var p={startState:function(){return{returnStack:[],bracketNesting:0,tokenize:e}},token:function(e,t){return t.tokenize(e,t)},blockCommentStart:'<#',blockCommentEnd:'#>',lineComment:'#',fold:'brace'};return p});e.defineMIME('application/x-powershell','powershell')});