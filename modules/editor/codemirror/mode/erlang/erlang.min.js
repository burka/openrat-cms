(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMIME('text/x-erlang','erlang');e.defineMode('erlang',function(r){'use strict';var h=['-type','-spec','-export_type','-opaque'],y=['after','begin','catch','case','cond','end','fun','if','let','of','query','receive','try','when'],v=/[\->,;]/,w=['->',';',','],x=['and','andalso','band','bnot','bor','bsl','bsr','bxor','div','not','or','orelse','rem','xor'],S=/[\+\-\*\/<>=\|:!]/,z=['=','+','-','*','/','>','>=','<','=<','=:=','==','=/=','/=','||','<-','!'],W=/[<\(\[\{]/,c=['<<','(','[','{'],U=/[>\)\]\}]/,f=['}',']',')','>>'],E=['is_atom','is_binary','is_bitstring','is_boolean','is_float','is_function','is_integer','is_list','is_number','is_pid','is_port','is_record','is_reference','is_tuple','atom','binary','bitstring','boolean','function','integer','list','number','pid','port','record','reference','tuple'],A=['abs','adler32','adler32_combine','alive','apply','atom_to_binary','atom_to_list','binary_to_atom','binary_to_existing_atom','binary_to_list','binary_to_term','bit_size','bitstring_to_list','byte_size','check_process_code','contact_binary','crc32','crc32_combine','date','decode_packet','delete_module','disconnect_node','element','erase','exit','float','float_to_list','garbage_collect','get','get_keys','group_leader','halt','hd','integer_to_list','internal_bif','iolist_size','iolist_to_binary','is_alive','is_atom','is_binary','is_bitstring','is_boolean','is_float','is_function','is_integer','is_list','is_number','is_pid','is_port','is_process_alive','is_record','is_reference','is_tuple','length','link','list_to_atom','list_to_binary','list_to_bitstring','list_to_existing_atom','list_to_float','list_to_integer','list_to_pid','list_to_tuple','load_module','make_ref','module_loaded','monitor_node','node','node_link','node_unlink','nodes','notalive','now','open_port','pid_to_list','port_close','port_command','port_connect','port_control','pre_loaded','process_flag','process_info','processes','purge_module','put','register','registered','round','self','setelement','size','spawn','spawn_link','spawn_monitor','spawn_opt','split_binary','statistics','term_to_binary','time','throw','tl','trunc','tuple_size','tuple_to_list','unlink','unregister','whereis'],u=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/,Z=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function M(e,r){if(r.in_string){r.in_string=(!d(e));return t(r,e,'string')};if(r.in_atom){r.in_atom=(!b(e));return t(r,e,'atom')};if(e.eatSpace()){return t(r,e,'whitespace')};if(!a(r)&&e.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/)){if(n(e.current(),h)){return t(r,e,'type')}
else{return t(r,e,'attribute')}};var i=e.next();if(i=='%'){e.skipToEnd();return t(r,e,'comment')};if(i==':'){return t(r,e,'colon')};if(i=='?'){e.eatSpace();e.eatWhile(u);return t(r,e,'macro')};if(i=='#'){e.eatSpace();e.eatWhile(u);return t(r,e,'record')};if(i=='$'){if(e.next()=='\\'&&!e.match(Z)){return t(r,e,'error')};return t(r,e,'number')};if(i=='.'){return t(r,e,'dot')};if(i=='\''){if(!(r.in_atom=(!b(e)))){if(e.match(/\s*\/\s*[0-9]/,!1)){e.match(/\s*\/\s*[0-9]/,!0);return t(r,e,'fun')};if(e.match(/\s*\(/,!1)||e.match(/\s*:/,!1)){return t(r,e,'function')}};return t(r,e,'atom')};if(i=='"'){r.in_string=(!d(e));return t(r,e,'string')};if(/[A-Z_Ø-ÞÀ-Ö]/.test(i)){e.eatWhile(u);return t(r,e,'variable')};if(/[a-z_ß-öø-ÿ]/.test(i)){e.eatWhile(u);if(e.match(/\s*\/\s*[0-9]/,!1)){e.match(/\s*\/\s*[0-9]/,!0);return t(r,e,'fun')};var o=e.current();if(n(o,y)){return t(r,e,'keyword')}
else if(n(o,x)){return t(r,e,'operator')}
else if(e.match(/\s*\(/,!1)){if(n(o,A)&&((a(r).token!=':')||(a(r,2).token=='erlang'))){return t(r,e,'builtin')}
else if(n(o,E)){return t(r,e,'guard')}
else{return t(r,e,'function')}}
else if(P(e)==':'){if(o=='erlang'){return t(r,e,'builtin')}
else{return t(r,e,'function')}}
else if(n(o,['true','false'])){return t(r,e,'boolean')}
else{return t(r,e,'atom')}};var s=/[0-9]/,l=/[0-9a-zA-Z]/;if(s.test(i)){e.eatWhile(s);if(e.eat('#')){if(!e.eatWhile(l)){e.backUp(1)}}
else if(e.eat('.')){if(!e.eatWhile(s)){e.backUp(1)}
else{if(e.eat(/[eE]/)){if(e.eat(/[-+]/)){if(!e.eatWhile(s)){e.backUp(2)}}
else{if(!e.eatWhile(s)){e.backUp(1)}}}}};return t(r,e,'number')};if(p(e,W,c)){return t(r,e,'open_paren')};if(p(e,U,f)){return t(r,e,'close_paren')};if(m(e,v,w)){return t(r,e,'separator')};if(m(e,S,z)){return t(r,e,'operator')};return t(r,e,null)};function p(e,t,r){if(e.current().length==1&&t.test(e.current())){e.backUp(1);while(t.test(e.peek())){e.next();if(n(e.current(),r)){return!0}};e.backUp(e.current().length-1)};return!1};function m(e,t,r){if(e.current().length==1&&t.test(e.current())){while(t.test(e.peek())){e.next()}
while(0<e.current().length){if(n(e.current(),r)){return!0}
else{e.backUp(1)}};e.next()};return!1};function d(e){return g(e,'"','\\')};function b(e){return g(e,'\'','\\')};function g(e,t,r){while(!e.eol()){var n=e.next();if(n==t){return!0}
else if(n==r){e.next()}};return!1};function P(e){var t=e.match(/([\n\s]+|%[^\n]*\n)*(.)/,!1);return t?t.pop():''};function n(e,t){return(-1<t.indexOf(e))};function t(e,t,r){j(e,q(r,t));switch(r){case'atom':return'atom';case'attribute':return'attribute';case'boolean':return'atom';case'builtin':return'builtin';case'close_paren':return null;case'colon':return null;case'comment':return'comment';case'dot':return null;case'error':return'error';case'fun':return'meta';case'function':return'tag';case'guard':return'property';case'keyword':return'keyword';case'macro':return'variable-2';case'number':return'number';case'open_paren':return null;case'operator':return'operator';case'record':return'bracket';case'separator':return null;case'string':return'string';case'type':return'def';case'variable':return'variable';default:return null}};function k(e,t,r,n){return{token:e,column:t,indent:r,type:n}};function q(e,t){return k(t.current(),t.column(),t.indentation(),e)};function C(e){return k(e,0,0,e)};function a(e,t){var r=e.tokenStack.length,n=(t?t:1);if(r<n){return!1}
else{return e.tokenStack[r-n]}};function j(e,t){if(!(t.type=='comment'||t.type=='whitespace')){e.tokenStack=I(e.tokenStack,t);e.tokenStack=O(e.tokenStack)}};function I(e,t){var r=e.length-1;if(0<r&&e[r].type==='record'&&t.type==='dot'){e.pop()}
else if(0<r&&e[r].type==='group'){e.pop();e.push(t)}
else{e.push(t)};return e};function O(e){if(!e.length)return e;var t=e.length-1;if(e[t].type==='dot'){return[]};if(t>1&&e[t].type==='fun'&&e[t-1].token==='fun'){return e.slice(0,t-1)};switch(e[t].token){case'}':return i(e,{g:['{']});case']':return i(e,{i:['[']});case')':return i(e,{i:['(']});case'>>':return i(e,{i:['<<']});case'end':return i(e,{i:['begin','case','fun','if','receive','try']});case',':return i(e,{e:['begin','try','when','->',',','(','[','{','<<']});case'->':return i(e,{r:['when'],m:['try','if','case','receive']});case';':return i(e,{E:['case','fun','if','receive','try','when']});case'catch':return i(e,{e:['try']});case'of':return i(e,{e:['case']});case'after':return i(e,{e:['receive','try']});default:return e}};function i(e,t){for(var a in t){var o=e.length-1,u=t[a];for(var r=o-1;-1<r;r--){if(n(e[r].token,u)){var i=e.slice(0,r);switch(a){case'm':return i.concat(e[r]).concat(e[o]);case'r':return i.concat(e[o]);case'i':return i;case'g':return i.concat(C('group'));case'E':return i.concat(e[r]);case'e':return i.concat(e[r])}}}};return(a=='E'?[]:e)};function T(t,i){var u,p=r.indentUnit,m=ee(i),s=a(t,1),d=a(t,2);if(t.in_string||t.in_atom){return e.Pass}
else if(!d){return 0}
else if(s.token=='when'){return s.column+p}
else if(m==='when'&&d.type==='function'){return d.indent+p}
else if(m==='('&&s.token==='fun'){return s.column+3}
else if(m==='catch'&&(u=l(t,['try']))){return u.column}
else if(n(m,['end','after','of'])){u=l(t,['begin','case','fun','if','receive','try']);return u?u.column:e.Pass}
else if(n(m,f)){u=l(t,c);return u?u.column:e.Pass}
else if(n(s.token,[',','|','||'])||n(m,[',','|','||'])){u=te(t);return u?u.column+u.token.length:p}
else if(s.token=='->'){if(n(d.token,['receive','case','if','try'])){return d.column+p+p}
else{return d.column+p}}
else if(n(s.token,c)){return s.column+s.token.length}
else{u=re(t);return o(u)?u.column+p:0}};function ee(e){var t=e.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return o(t)&&(t.index===0)?t[0]:''};function te(e){var t=e.tokenStack.slice(0,-1),r=s(t,'type',['open_paren']);return o(t[r])?t[r]:!1};function re(e){var r=e.tokenStack,t=s(r,'type',['open_paren','separator','keyword']),n=s(r,'type',['operator']);if(o(t)&&o(n)&&t<n){return r[t+1]}
else if(o(t)){return r[t]}
else{return!1}};function l(e,t){var r=e.tokenStack,n=s(r,'token',t);return o(r[n])?r[n]:!1};function s(e,t,r){for(var i=e.length-1;-1<i;i--){if(n(e[i][t],r)){return i}};return!1};function o(e){return(e!==!1)&&(e!=null)};return{startState:function(){return{tokenStack:[],in_string:!1,in_atom:!1}},token:function(e,t){return M(e,t)},indent:function(e,t){return T(e,t)},lineComment:'%'}})});