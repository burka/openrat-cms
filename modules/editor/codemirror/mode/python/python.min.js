(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';function n(e){return new RegExp('^(('+e.join(')|(')+'))\\b')};var o=n(['and','or','not','is']),r=['as','assert','break','class','continue','def','del','elif','else','except','finally','for','from','global','if','import','lambda','pass','raise','return','try','while','with','yield','in'],i=['abs','all','any','bin','bool','bytearray','callable','chr','classmethod','compile','complex','delattr','dict','dir','divmod','enumerate','eval','filter','float','format','frozenset','getattr','globals','hasattr','hash','help','hex','id','input','int','isinstance','issubclass','iter','len','list','locals','map','max','memoryview','min','next','object','oct','open','ord','pow','property','range','repr','reversed','round','set','setattr','slice','sorted','staticmethod','str','sum','super','tuple','type','vars','zip','__import__','NotImplemented','Ellipsis','__debug__'];e.registerHelper('hintWords','python',r.concat(i));function t(e){return e.scopes[e.scopes.length-1]};e.defineMode('python',function(s,a){var c='error',F=a.delimiters||a.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,u=[a.singleOperators,a.doubleOperators,a.doubleDelimiters,a.tripleDelimiters,a.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@])/];for(var d=0;d<u.length;d++)if(!u[d])u.splice(d--,1);var h=a.hangingIndent||s.indentUnit,l=r,f=i;if(a.extra_keywords!=undefined)l=l.concat(a.extra_keywords);if(a.extra_builtins!=undefined)f=f.concat(a.extra_builtins);var y=!(a.version&&Number(a.version)<3);if(y){var p=a.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;l=l.concat(['nonlocal','False','True','None','async','await']);f=f.concat(['ascii','bytes','exec','print']);var b=new RegExp('^(([rbuf]|(br))?(\'{3}|"{3}|[\'"]))','i')}
else{var p=a.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;l=l.concat(['exec','print']);f=f.concat(['apply','basestring','buffer','cmp','coerce','execfile','file','intern','long','raw_input','reduce','reload','unichr','unicode','xrange','False','True','None']);var b=new RegExp('^(([rubf]|(ur)|(br))?(\'{3}|"{3}|[\'"]))','i')};var w=n(l),z=n(f);function m(e,n){if(e.sol())n.indent=e.indentation();if(e.sol()&&t(n).type=='py'){var r=t(n).offset;if(e.eatSpace()){var a=e.indentation();if(a>r)v(n);else if(a<r&&x(e,n)&&e.peek()!='#')n.errorToken=!0;return null}
else{var i=g(e,n);if(r>0&&x(e,n))i+=' '+c;return i}};return g(e,n)};function g(e,t){if(e.eatSpace())return null;var a=e.peek();if(a=='#'){e.skipToEnd();return'comment'};if(e.match(/^[0-9\.]/,!1)){var r=!1;if(e.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)){r=!0};if(e.match(/^[\d_]+\.\d*/)){r=!0};if(e.match(/^\.\d+/)){r=!0};if(r){e.eat(/J/i);return'number'};var n=!1;if(e.match(/^0x[0-9a-f_]+/i))n=!0;if(e.match(/^0b[01_]+/i))n=!0;if(e.match(/^0o[0-7_]+/i))n=!0;if(e.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)){e.eat(/J/i);n=!0};if(e.match(/^0(?![\dx])/i))n=!0;if(n){e.eat(/L/i);return'number'}};if(e.match(b)){t.tokenize=E(e.current());return t.tokenize(e,t)};for(var i=0;i<u.length;i++)if(e.match(u[i]))return'operator';if(e.match(F))return'punctuation';if(t.lastToken=='.'&&e.match(p))return'property';if(e.match(w)||e.match(o))return'keyword';if(e.match(z))return'builtin';if(e.match(/^(self|cls)\b/))return'variable-2';if(e.match(p)){if(t.lastToken=='def'||t.lastToken=='class')return'def';return'variable'};e.next();return c};function E(e){while('rubf'.indexOf(e.charAt(0).toLowerCase())>=0)e=e.substr(1);var n=e.length==1,t='string';function r(r,i){while(!r.eol()){r.eatWhile(/[^'"\\]/);if(r.eat('\\')){r.next();if(n&&r.eol())return t}
else if(r.match(e)){i.tokenize=m;return t}
else{r.eat(/['"]/)}};if(n){if(a.singleLineStringErrors)return c;else i.tokenize=m};return t};r.isString=!0;return r};function v(e){while(t(e).type!='py')e.scopes.pop();e.scopes.push({offset:t(e).offset+s.indentUnit,type:'py',align:null})};function T(e,t,n){var r=e.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:e.column()+1;t.scopes.push({offset:t.indent+h,type:n,align:r})};function x(e,n){var r=e.indentation();while(n.scopes.length>1&&t(n).offset>r){if(t(n).type!='py')return!0;n.scopes.pop()};return t(n).offset!=r};function A(n,e){if(n.sol())e.beginningOfLine=!0;var a=e.tokenize(n,e),r=n.current();if(e.beginningOfLine&&r=='@')return n.match(p,!1)?'meta':y?'operator':c;if(/\S/.test(r))e.beginningOfLine=!1;if((a=='variable'||a=='builtin')&&e.lastToken=='meta')a='meta';if(r=='pass'||r=='return')e.dedent+=1;if(r=='lambda')e.lambda=!0;if(r==':'&&!e.lambda&&t(e).type=='py')v(e);var i=r.length==1?'[({'.indexOf(r):-1;if(i!=-1)T(n,e,'])}'.slice(i,i+1));i='])}'.indexOf(r);if(i!=-1){if(t(e).type==r)e.indent=e.scopes.pop().offset-h;else return c};if(e.dedent>0&&n.eol()&&t(e).type=='py'){if(e.scopes.length>1)e.scopes.pop();e.dedent-=1};return a};var k={startState:function(e){return{tokenize:m,scopes:[{offset:e||0,type:'py',align:null}],indent:e||0,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var r=t.errorToken;if(r)t.errorToken=!1;var n=A(e,t);if(n&&n!='comment')t.lastToken=(n=='keyword'||n=='punctuation')?e.current():n;if(n=='punctuation')n=null;if(e.eol()&&t.lambda)t.lambda=!1;return r?n+' '+c:n},indent:function(n,r){if(n.tokenize!=m)return n.tokenize.isString?e.Pass:0;var i=t(n),a=i.type==r.charAt(0);if(i.align!=null)return i.align-(a?1:0);else return i.offset-(a?h:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:'\'"'},lineComment:'#',fold:'indent'};return k});e.defineMIME('text/x-python','python');var a=function(e){return e.split(' ')};e.defineMIME('text/x-cython',{name:'python',extra_keywords:a('by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE')})});