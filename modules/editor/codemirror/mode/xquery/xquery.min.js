(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMode('xquery',function(){var a=function(){function o(e){return{type:e,style:'keyword'}};var u=o('operator'),c={type:'atom',style:'atom'},l={type:'punctuation',style:null},f={type:'axis_specifier',style:'qualifier'};var n={',':l};var r=['after','all','allowing','ancestor','ancestor-or-self','any','array','as','ascending','at','attribute','base-uri','before','boundary-space','by','case','cast','castable','catch','child','collation','comment','construction','contains','content','context','copy','copy-namespaces','count','decimal-format','declare','default','delete','descendant','descendant-or-self','descending','diacritics','different','distance','document','document-node','element','else','empty','empty-sequence','encoding','end','entire','every','exactly','except','external','first','following','following-sibling','for','from','ftand','ftnot','ft-option','ftor','function','fuzzy','greatest','group','if','import','in','inherit','insensitive','insert','instance','intersect','into','invoke','is','item','language','last','lax','least','let','levels','lowercase','map','modify','module','most','namespace','next','no','node','nodes','no-inherit','no-preserve','not','occurs','of','only','option','order','ordered','ordering','paragraph','paragraphs','parent','phrase','preceding','preceding-sibling','preserve','previous','processing-instruction','relationship','rename','replace','return','revalidation','same','satisfies','schema','schema-attribute','schema-element','score','self','sensitive','sentence','sentences','sequence','skip','sliding','some','stable','start','stemming','stop','strict','strip','switch','text','then','thesaurus','times','to','transform','treat','try','tumbling','type','typeswitch','union','unordered','update','updating','uppercase','using','validate','value','variable','version','weight','when','where','wildcards','window','with','without','word','words','xquery'];for(var e=0,t=r.length;e<t;e++){n[r[e]]=o(r[e])};var s=['xs:anyAtomicType','xs:anySimpleType','xs:anyType','xs:anyURI','xs:base64Binary','xs:boolean','xs:byte','xs:date','xs:dateTime','xs:dateTimeStamp','xs:dayTimeDuration','xs:decimal','xs:double','xs:duration','xs:ENTITIES','xs:ENTITY','xs:float','xs:gDay','xs:gMonth','xs:gMonthDay','xs:gYear','xs:gYearMonth','xs:hexBinary','xs:ID','xs:IDREF','xs:IDREFS','xs:int','xs:integer','xs:item','xs:java','xs:language','xs:long','xs:Name','xs:NCName','xs:negativeInteger','xs:NMTOKEN','xs:NMTOKENS','xs:nonNegativeInteger','xs:nonPositiveInteger','xs:normalizedString','xs:NOTATION','xs:numeric','xs:positiveInteger','xs:precisionDecimal','xs:QName','xs:short','xs:string','xs:time','xs:token','xs:unsignedByte','xs:unsignedInt','xs:unsignedLong','xs:unsignedShort','xs:untyped','xs:untypedAtomic','xs:yearMonthDuration'];for(var e=0,t=s.length;e<t;e++){n[s[e]]=c};var a=['eq','ne','lt','le','gt','ge',':=','=','>','>=','<','<=','.','|','?','and','or','div','idiv','mod','*','/','+','-'];for(var e=0,t=a.length;e<t;e++){n[a[e]]=u};var i=['self::','attribute::','child::','descendant::','descendant-or-self::','parent::','ancestor::','ancestor-or-self::','following::','preceding::','following-sibling::','preceding-sibling::'];for(var e=0,t=i.length;e<t;e++){n[i[e]]=f};return n}();function r(e,t,n){t.tokenize=n;return n(e,t)};function t(t,i){var s=t.next(),w=!1,v=y(t);if(s=='<'){if(t.match('!--',!0))return r(t,i,d);if(t.match('![CDATA',!1)){i.tokenize=p;return'tag'};if(t.match('?',!1)){return r(t,i,x)};var I=t.eat('/');t.eatSpace();var k='',b;while((b=t.eat(/[^\s\u00a0=<>"'\/?]/)))k+=b;return r(t,i,m(k,I))}
else if(s=='{'){n(i,{type:'codeblock'});return null}
else if(s=='}'){e(i);return null}
else if(c(i)){if(s=='>')return'tag';else if(s=='/'&&t.eat('>')){e(i);return'tag'}
else return'variable'}
else if(/\d/.test(s)){t.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/);return'atom'}
else if(s==='('&&t.eat(':')){n(i,{type:'comment'});return r(t,i,l)}
else if(!v&&(s==='"'||s==='\''))return r(t,i,o(s));else if(s==='$'){return r(t,i,f)}
else if(s===':'&&t.eat('=')){return'keyword'}
else if(s==='('){n(i,{type:'paren'});return null}
else if(s===')'){e(i);return null}
else if(s==='['){n(i,{type:'bracket'});return null}
else if(s===']'){e(i);return null}
else{var u=a.propertyIsEnumerable(s)&&a[s];if(v&&s==='"')while(t.next()!=='"'){};if(v&&s==='\'')while(t.next()!=='\''){};if(!u)t.eatWhile(/[\w\$_-]/);var z=t.eat(':');if(!t.eat(':')&&z){t.eatWhile(/[\w\$_-]/)};if(t.match(/^[ \t]*\(/,!1)){w=!0};var h=t.current();u=a.propertyIsEnumerable(h)&&a[h];if(w&&!u)u={type:'function_call',style:'variable def'};if(g(i)){e(i);return'variable'};if(h=='element'||h=='attribute'||u.type=='axis_specifier')n(i,{type:'xmlconstructor'});return u?u.style:'variable'}};function l(t,n){var a=!1,s=!1,i=0,r;while(r=t.next()){if(r==')'&&a){if(i>0)i--;else{e(n);break}}
else if(r==':'&&s){i++};a=(r==':');s=(r=='(')};return'comment'};function o(r,a){return function(s,u){var c;if(h(u)&&s.current()==r){e(u);if(a)u.tokenize=a;return'string'};n(u,{type:'string',name:r,tokenize:o(r,a)});if(s.match('{',!1)&&i(u)){u.tokenize=t;return'string'}
while(c=s.next()){if(c==r){e(u);if(a)u.tokenize=a;break}
else{if(s.match('{',!1)&&i(u)){u.tokenize=t;return'string'}}};return'string'}};function f(e,n){var r=/[\w\$_-]/;if(e.eat('"')){while(e.next()!=='"'){};e.eat(':')}
else{e.eatWhile(r);if(!e.match(':=',!1))e.eat(':')};e.eatWhile(r);n.tokenize=t;return'variable'};function m(r,i){return function(a,s){a.eatSpace();if(i&&a.eat('>')){e(s);s.tokenize=t;return'tag'};if(!a.eat('/'))n(s,{type:'tag',name:r,tokenize:t});if(!a.eat('>')){s.tokenize=u;return'tag'}
else{s.tokenize=t};return'tag'}};function u(a,s){var l=a.next();if(l=='/'&&a.eat('>')){if(i(s))e(s);if(c(s))e(s);return'tag'};if(l=='>'){if(i(s))e(s);return'tag'};if(l=='=')return null;if(l=='"'||l=='\'')return r(a,s,o(l,u));if(!i(s))n(s,{type:'attribute',tokenize:u});a.eat(/[a-zA-Z_:]/);a.eatWhile(/[-a-zA-Z0-9_:.]/);a.eatSpace();if(a.match('>',!1)||a.match('/',!1)){e(s);s.tokenize=t};return'attribute'};function d(e,n){var r;while(r=e.next()){if(r=='-'&&e.match('->',!0)){n.tokenize=t;return'comment'}}};function p(e,n){var r;while(r=e.next()){if(r==']'&&e.match(']',!0)){n.tokenize=t;return'comment'}}};function x(e,n){var r;while(r=e.next()){if(r=='?'&&e.match('>',!0)){n.tokenize=t;return'comment meta'}}};function c(e){return s(e,'tag')};function i(e){return s(e,'attribute')};function g(e){return s(e,'xmlconstructor')};function h(e){return s(e,'string')};function y(e){if(e.current()==='"')return e.match(/^[^"]+"\:/,!1);else if(e.current()==='\'')return e.match(/^[^"]+'\:/,!1);else return!1};function s(e,t){return(e.stack.length&&e.stack[e.stack.length-1].type==t)};function n(e,t){e.stack.push(t)};function e(e){e.stack.pop();var n=e.stack.length&&e.stack[e.stack.length-1].tokenize;e.tokenize=n||t};return{startState:function(){return{tokenize:t,cc:[],stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t);return n},blockCommentStart:'(:',blockCommentEnd:':)'}});e.defineMIME('application/xquery','xquery')});