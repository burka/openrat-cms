(function(t){if(typeof exports=='object'&&typeof module=='object')t(require('../../lib/codemirror'),require('../javascript/javascript'),require('../css/css'),require('../htmlmixed/htmlmixed'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror','../javascript/javascript','../css/css','../htmlmixed/htmlmixed'],t);else t(CodeMirror)})(function(t){'use strict';t.defineMode('pug',function(e){var i='keyword',p='meta',l='builtin',h='qualifier',s={'{':'}','(':')','[':']'};var n=t.getMode(e,'javascript');function r(){this.javaScriptLine=!1;this.javaScriptLineExcludesColon=!1;this.javaScriptArguments=!1;this.javaScriptArgumentsDepth=0;this.isInterpolating=!1;this.interpolationNesting=0;this.jsState=t.startState(n);this.restOfLine='';this.isIncludeFiltered=!1;this.isEach=!1;this.lastTag='';this.scriptType='';this.isAttrs=!1;this.attrsNest=[];this.inAttributeName=!0;this.attributeIsType=!1;this.attrValue='';this.indentOf=Infinity;this.indentToken='';this.innerMode=null;this.innerState=null;this.innerModeForLine=!1};r.prototype.copy=function(){var e=new r();e.javaScriptLine=this.javaScriptLine;e.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon;e.javaScriptArguments=this.javaScriptArguments;e.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth;e.isInterpolating=this.isInterpolating;e.interpolationNesting=this.interpolationNesting;e.jsState=t.copyState(n,this.jsState);e.innerMode=this.innerMode;if(this.innerMode&&this.innerState){e.innerState=t.copyState(this.innerMode,this.innerState)};e.restOfLine=this.restOfLine;e.isIncludeFiltered=this.isIncludeFiltered;e.isEach=this.isEach;e.lastTag=this.lastTag;e.scriptType=this.scriptType;e.isAttrs=this.isAttrs;e.attrsNest=this.attrsNest.slice();e.inAttributeName=this.inAttributeName;e.attributeIsType=this.attributeIsType;e.attrValue=this.attrValue;e.indentOf=this.indentOf;e.indentToken=this.indentToken;e.innerModeForLine=this.innerModeForLine;return e};function d(t,e){if(t.sol()){e.javaScriptLine=!1;e.javaScriptLineExcludesColon=!1};if(e.javaScriptLine){if(e.javaScriptLineExcludesColon&&t.peek()===':'){e.javaScriptLine=!1;e.javaScriptLineExcludesColon=!1;return};var i=n.token(t,e.jsState);if(t.eol())e.javaScriptLine=!1;return i||!0}};function m(t,e){if(e.javaScriptArguments){if(e.javaScriptArgumentsDepth===0&&t.peek()!=='('){e.javaScriptArguments=!1;return};if(t.peek()==='('){e.javaScriptArgumentsDepth++}
else if(t.peek()===')'){e.javaScriptArgumentsDepth--};if(e.javaScriptArgumentsDepth===0){e.javaScriptArguments=!1;return};var i=n.token(t,e.jsState);return i||!0}};function v(t){if(t.match(/^yield\b/)){return'keyword'}};function S(t){if(t.match(/^(?:doctype) *([^\n]+)?/)){return p}};function c(t,e){if(t.match('#{')){e.isInterpolating=!0;e.interpolationNesting=0;return'punctuation'}};function g(t,e){if(e.isInterpolating){if(t.peek()==='}'){e.interpolationNesting--;if(e.interpolationNesting<0){t.next();e.isInterpolating=!1;return'punctuation'}}
else if(t.peek()==='{'){e.interpolationNesting++};return n.token(t,e.jsState)||!0}};function j(t,e){if(t.match(/^case\b/)){e.javaScriptLine=!0;return i}};function b(t,e){if(t.match(/^when\b/)){e.javaScriptLine=!0;e.javaScriptLineExcludesColon=!0;return i}};function L(t){if(t.match(/^default\b/)){return i}};function A(t,e){if(t.match(/^extends?\b/)){e.restOfLine='string';return i}};function y(t,e){if(t.match(/^append\b/)){e.restOfLine='variable';return i}};function k(t,e){if(t.match(/^prepend\b/)){e.restOfLine='variable';return i}};function M(t,e){if(t.match(/^block\b *(?:(prepend|append)\b)?/)){e.restOfLine='variable';return i}};function T(t,e){if(t.match(/^include\b/)){e.restOfLine='string';return i}};function x(t,e){if(t.match(/^include:([a-zA-Z0-9\-]+)/,!1)&&t.match('include')){e.isIncludeFiltered=!0;return i}};function I(t,e){if(e.isIncludeFiltered){var i=u(t,e);e.isIncludeFiltered=!1;e.restOfLine='string';return i}};function N(t,e){if(t.match(/^mixin\b/)){e.javaScriptLine=!0;return i}};function O(t,e){if(t.match(/^\+([-\w]+)/)){if(!t.match(/^\( *[-\w]+ *=/,!1)){e.javaScriptArguments=!0;e.javaScriptArgumentsDepth=0};return'variable'};if(t.match(/^\+#{/,!1)){t.next();e.mixinCallAfter=!0;return c(t,e)}};function w(t,e){if(e.mixinCallAfter){e.mixinCallAfter=!1;if(!t.match(/^\( *[-\w]+ *=/,!1)){e.javaScriptArguments=!0;e.javaScriptArgumentsDepth=0};return!0}};function E(t,e){if(t.match(/^(if|unless|else if|else)\b/)){e.javaScriptLine=!0;return i}};function C(t,e){if(t.match(/^(- *)?(each|for)\b/)){e.isEach=!0;return i}};function F(t,e){if(e.isEach){if(t.match(/^ in\b/)){e.javaScriptLine=!0;e.isEach=!1;return i}
else if(t.sol()||t.eol()){e.isEach=!1}
else if(t.next()){while(!t.match(/^ in\b/,!1)&&t.next());return'variable'}}};function D(t,e){if(t.match(/^while\b/)){e.javaScriptLine=!0;return i}};function V(t,e){var i;if(i=t.match(/^(\w(?:[-:\w]*\w)?)\/?/)){e.lastTag=i[1].toLowerCase();if(e.lastTag==='script'){e.scriptType='application/javascript'};return'tag'}};function u(i,n){if(i.match(/^:([\w\-]+)/)){var r;if(e&&e.innerModes){r=e.innerModes(i.current().substring(1))};if(!r){r=i.current().substring(1)};if(typeof r==='string'){r=t.getMode(e,r)};a(i,n,r);return'atom'}};function q(t,e){if(t.match(/^(!?=|-)/)){e.javaScriptLine=!0;return'punctuation'}};function U(t){if(t.match(/^#([\w-]+)/)){return l}};function Z(t){if(t.match(/^\.([\w-]+)/)){return h}};function z(t,e){if(t.peek()=='('){t.next();e.isAttrs=!0;e.attrsNest=[];e.inAttributeName=!0;e.attrValue='';e.attributeIsType=!1;return'punctuation'}};function o(e,i){if(i.isAttrs){if(s[e.peek()]){i.attrsNest.push(s[e.peek()])};if(i.attrsNest[i.attrsNest.length-1]===e.peek()){i.attrsNest.pop()}
else if(e.eat(')')){i.isAttrs=!1;return'punctuation'};if(i.inAttributeName&&e.match(/^[^=,\)!]+/)){if(e.peek()==='='||e.peek()==='!'){i.inAttributeName=!1;i.jsState=t.startState(n);if(i.lastTag==='script'&&e.current().trim().toLowerCase()==='type'){i.attributeIsType=!0}
else{i.attributeIsType=!1}};return'attribute'};var r=n.token(e,i.jsState);if(i.attributeIsType&&r==='string'){i.scriptType=e.current().toString()};if(i.attrsNest.length===0&&(r==='string'||r==='variable'||r==='keyword')){try{Function('','var x '+i.attrValue.replace(/,\s*$/,'').replace(/^!/,''));i.inAttributeName=!0;i.attrValue='';e.backUp(e.current().length);return o(e,i)}catch(a){}};i.attrValue+=e.current();return r||!0}};function tt(t,e){if(t.match(/^&attributes\b/)){e.javaScriptArguments=!0;e.javaScriptArgumentsDepth=0;return'keyword'}};function et(t){if(t.sol()&&t.eatSpace()){return'indent'}};function it(t,e){if(t.match(/^ *\/\/(-)?([^\n]*)/)){e.indentOf=t.indentation();e.indentToken='comment';return'comment'}};function nt(t){if(t.match(/^: */)){return'colon'}};function rt(t,e){if(t.match(/^(?:\| ?| )([^\n]+)/)){return'string'};if(t.match(/^(<[^\n]*)/,!1)){a(t,e,'htmlmixed');e.innerModeForLine=!0;return f(t,e,!0)}};function at(t,e){if(t.eat('.')){var i=null;if(e.lastTag==='script'&&e.scriptType.toLowerCase().indexOf('javascript')!=-1){i=e.scriptType.toLowerCase().replace(/"|'/g,'')}
else if(e.lastTag==='style'){i='css'};a(t,e,i);return'dot'}};function st(t){t.next();return null};function a(i,n,r){r=t.mimeModes[r]||r;r=e.innerModes?e.innerModes(r)||r:r;r=t.mimeModes[r]||r;r=t.getMode(e,r);n.indentOf=i.indentation();if(r&&r.name!=='null'){n.innerMode=r}
else{n.indentToken='string'}};function f(e,i,n){if(e.indentation()>i.indentOf||(i.innerModeForLine&&!e.sol())||n){if(i.innerMode){if(!i.innerState){i.innerState=i.innerMode.startState?t.startState(i.innerMode,e.indentation()):{}};return e.hideFirstChars(i.indentOf+2,function(){return i.innerMode.token(e,i.innerState)||!0})}
else{e.skipToEnd();return i.indentToken}}
else if(e.sol()){i.indentOf=Infinity;i.indentToken=null;i.innerMode=null;i.innerState=null}};function ct(t,e){if(t.sol()){e.restOfLine=''};if(e.restOfLine){t.skipToEnd();var i=e.restOfLine;e.restOfLine='';return i}};function ut(){return new r()};function ot(t){return t.copy()};function ft(t,e){var i=f(t,e)||ct(t,e)||g(t,e)||I(t,e)||F(t,e)||o(t,e)||d(t,e)||m(t,e)||w(t,e)||v(t,e)||S(t,e)||c(t,e)||j(t,e)||b(t,e)||L(t,e)||A(t,e)||y(t,e)||k(t,e)||M(t,e)||T(t,e)||x(t,e)||N(t,e)||O(t,e)||E(t,e)||C(t,e)||D(t,e)||V(t,e)||u(t,e)||q(t,e)||U(t,e)||Z(t,e)||z(t,e)||tt(t,e)||et(t,e)||rt(t,e)||it(t,e)||nt(t,e)||at(t,e)||st(t,e);return i===!0?null:i};return{startState:ut,copyState:ot,token:ft}},'javascript','css','htmlmixed');t.defineMIME('text/x-pug','pug');t.defineMIME('text/x-jade','pug')});