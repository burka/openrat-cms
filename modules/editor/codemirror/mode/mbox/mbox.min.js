(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';var r=['From','Sender','Reply-To','To','Cc','Bcc','Message-ID','In-Reply-To','References','Resent-From','Resent-Sender','Resent-To','Resent-Cc','Resent-Bcc','Resent-Message-ID','Return-Path','Received'],n=['Date','Subject','Comments','Keywords','Resent-Date'];e.registerHelper('hintWords','mbox',r.concat(n));var t=/^[ \t]/,i=/^From /,a=new RegExp('^('+r.join('|')+'): '),o=new RegExp('^('+n.join('|')+'): '),d=/^[^:]+:/,c=/^[^ ]+@[^ ]+/,m=/^.*?(?=[^ ]+?@[^ ]+)/,s=/^<.*?>/,u=/^.*?(?=<.*>)/;function f(e){if(e==='Subject')return'header';return'string'};function l(r,e){if(r.sol()){e.inSeparator=!1;if(e.inHeader&&r.match(t)){return null}
else{e.inHeader=!1;e.header=null};if(r.match(i)){e.inHeaders=!0;e.inSeparator=!0;return'atom'};var n,p=!1;if((n=r.match(o))||(p=!0)&&(n=r.match(a))){e.inHeaders=!0;e.inHeader=!0;e.emailPermitted=p;e.header=n[1];return'atom'};if(e.inHeaders&&(n=r.match(d))){e.inHeader=!0;e.emailPermitted=!0;e.header=n[1];return'atom'};e.inHeaders=!1;r.skipToEnd();return null};if(e.inSeparator){if(r.match(c))return'link';if(r.match(m))return'atom';r.skipToEnd();return'atom'};if(e.inHeader){var l=f(e.header);if(e.emailPermitted){if(r.match(s))return l+' link';if(r.match(u))return l};r.skipToEnd();return l};r.skipToEnd();return null};e.defineMode('mbox',function(){return{startState:function(){return{inSeparator:!1,inHeader:!1,emailPermitted:!1,header:null,inHeaders:!1}},token:l,blankLine:function(e){e.inHeaders=e.inSeparator=e.inHeader=!1}}});e.defineMIME('application/mbox','mbox')});