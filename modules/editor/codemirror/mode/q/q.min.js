(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMode('q',function(e){var o=e.indentUnit,t,s=a(['abs','acos','aj','aj0','all','and','any','asc','asin','asof','atan','attr','avg','avgs','bin','by','ceiling','cols','cor','cos','count','cov','cross','csv','cut','delete','deltas','desc','dev','differ','distinct','div','do','each','ej','enlist','eval','except','exec','exit','exp','fby','fills','first','fkeys','flip','floor','from','get','getenv','group','gtime','hclose','hcount','hdel','hopen','hsym','iasc','idesc','if','ij','in','insert','inter','inv','key','keys','last','like','list','lj','load','log','lower','lsq','ltime','ltrim','mavg','max','maxs','mcount','md5','mdev','med','meta','min','mins','mmax','mmin','mmu','mod','msum','neg','next','not','null','or','over','parse','peach','pj','plist','prd','prds','prev','prior','rand','rank','ratios','raze','read0','read1','reciprocal','reverse','rload','rotate','rsave','rtrim','save','scan','select','set','setenv','show','signum','sin','sqrt','ss','ssr','string','sublist','sum','sums','sv','system','tables','tan','til','trim','txf','type','uj','ungroup','union','update','upper','upsert','value','var','view','views','vs','wavg','where','where','while','within','wj','wj1','wsum','xasc','xbar','xcol','xcols','xdesc','xexp','xgroup','xkey','xlog','xprev','xrank']),c=/[|/&^!+:\\\-*%$=~#;@><,?_'"\[\(\]\)\s{}]/;function a(e){return new RegExp('^('+e.join('|')+')$')};function n(e,i){var a=e.sol(),r=e.next();t=null;if(a)if(r=='/')return(i.tokenize=l)(e,i);else if(r=='\\'){if(e.eol()||/\s/.test(e.peek()))return e.skipToEnd(),/^\\\s*$/.test(e.current())?(i.tokenize=d)(e):i.tokenize=n,'comment';else return i.tokenize=n,'builtin'};if(/\s/.test(r))return e.peek()=='/'?(e.skipToEnd(),'comment'):'whitespace';if(r=='"')return(i.tokenize=f)(e,i);if(r=='`')return e.eatWhile(/[A-Za-z\d_:\/.]/),'symbol';if(('.'==r&&/\d/.test(e.peek()))||/\d/.test(r)){var o=null;e.backUp(1);if(e.match(/^\d{4}\.\d{2}(m|\.\d{2}([DT](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||e.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||e.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||e.match(/^\d+[ptuv]{1}/))o='temporal';else if(e.match(/^0[NwW]{1}/)||e.match(/^0x[\da-fA-F]*/)||e.match(/^[01]+[b]{1}/)||e.match(/^\d+[chijn]{1}/)||e.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/))o='number';return(o&&(!(r=e.peek())||c.test(r)))?o:(e.next(),'error')};if(/[A-Za-z]|\./.test(r))return e.eatWhile(/[A-Za-z._\d]/),s.test(e.current())?'keyword':'variable';if(/[|/&^!+:\\\-*%$=~#;@><\.,?_']/.test(r))return null;if(/[{}\(\[\]\)]/.test(r))return null;return'error'};function l(e,t){return e.skipToEnd(),/\/\s*$/.test(e.current())?(t.tokenize=u)(e,t):(t.tokenize=n),'comment'};function u(e,t){var i=e.sol()&&e.peek()=='\\';e.skipToEnd();if(i&&/^\\\s*$/.test(e.current()))t.tokenize=n;return'comment'};function d(e){return e.skipToEnd(),'comment'};function f(e,t){var i=!1,r,o=!1;while((r=e.next())){if(r=='"'&&!i){o=!0;break};i=!i&&r=='\\'};if(o)t.tokenize=n;return'string'};function i(e,t,n){e.context={prev:e.context,indent:e.indent,col:n,type:t}};function r(e){e.indent=e.context.indent;e.context=e.context.prev};return{startState:function(){return{tokenize:n,context:null,indent:0,col:0}},token:function(n,e){if(n.sol()){if(e.context&&e.context.align==null)e.context.align=!1;e.indent=n.indentation()};var o=e.tokenize(n,e);if(o!='comment'&&e.context&&e.context.align==null&&e.context.type!='pattern'){e.context.align=!0};if(t=='(')i(e,')',n.column());else if(t=='[')i(e,']',n.column());else if(t=='{')i(e,'}',n.column());else if(/[\]\}\)]/.test(t)){while(e.context&&e.context.type=='pattern')r(e);if(e.context&&t==e.context.type)r(e)}
else if(t=='.'&&e.context&&e.context.type=='pattern')r(e);else if(/atom|string|variable/.test(o)&&e.context){if(/[\}\]]/.test(e.context.type))i(e,'pattern',n.column());else if(e.context.type=='pattern'&&!e.context.align){e.context.align=!0;e.context.col=n.column()}};return o},indent:function(e,n){var r=n&&n.charAt(0),t=e.context;if(/[\]\}]/.test(r))while(t&&t.type=='pattern')t=t.prev;var i=t&&r==t.type;if(!t)return 0;else if(t.type=='pattern')return t.col;else if(t.align)return t.col+(i?0:1);else return t.indent+(i?0:o)}}});e.defineMIME('text/x-q','q')});