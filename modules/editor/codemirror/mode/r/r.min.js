(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.registerHelper('wordChars','r',/[\w.]/);e.defineMode('r',function(e){function r(e){var r=e.split(' '),n={};for(var t=0;t<r.length;++t)n[r[t]]=!0;return n};var s=r('NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_'),d=r('list quote bquote eval return call parse deparse'),p=r('if else repeat while function for in next break'),m=r('if else repeat while function for'),u=/[+\-*\/^<>=!&|~$:]/,t;function a(e,n){t=null;var r=e.next();if(r=='#'){e.skipToEnd();return'comment'}
else if(r=='0'&&e.eat('x')){e.eatWhile(/[\da-f]/i);return'number'}
else if(r=='.'&&e.eat(/\d/)){e.match(/\d*(?:e[+\-]?\d+)?/);return'number'}
else if(/\d/.test(r)){e.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/);return'number'}
else if(r=='\''||r=='"'){n.tokenize=x(r);return'string'}
else if(r=='`'){e.match(/[^`]+`/);return'variable-3'}
else if(r=='.'&&e.match(/.[.\d]+/)){return'keyword'}
else if(/[\w\.]/.test(r)&&r!='_'){e.eatWhile(/[\w\.]/);var i=e.current();if(s.propertyIsEnumerable(i))return'atom';if(p.propertyIsEnumerable(i)){if(m.propertyIsEnumerable(i)&&!e.match(/\s*if(\s+|$)/,!1))t='block';return'keyword'};if(d.propertyIsEnumerable(i))return'builtin';return'variable'}
else if(r=='%'){if(e.skipTo('%'))e.next();return'operator variable-2'}
else if((r=='<'&&e.eat('-'))||(r=='<'&&e.match('<-'))||(r=='-'&&e.match(/>>?/))){return'operator arrow'}
else if(r=='='&&n.ctx.argList){return'arg-is'}
else if(u.test(r)){if(r=='$')return'operator dollar';e.eatWhile(u);return'operator'}
else if(/[\(\){}\[\];]/.test(r)){t=r;if(r==';')return'semi';return null}
else{return null}};function x(e){return function(t,r){if(t.eat('\\')){var n=t.next();if(n=='x')t.match(/^[a-f0-9]{2}/i);else if((n=='u'||n=='U')&&t.eat('{')&&t.skipTo('}'))t.next();else if(n=='u')t.match(/^[a-f0-9]{4}/i);else if(n=='U')t.match(/^[a-f0-9]{8}/i);else if(/[0-7]/.test(n))t.match(/^[0-7]{1,2}/);return'string-2'}
else{var i;while((i=t.next())!=null){if(i==e){r.tokenize=a;break};if(i=='\\'){t.backUp(1);break}};return'string'}}};var o=1,i=2,f=4;function n(e,t,r){e.ctx={type:t,indent:e.indent,flags:0,column:r.column(),prev:e.ctx}};function c(e,t){var r=e.ctx;e.ctx={type:r.type,indent:r.indent,flags:r.flags|t,column:r.column,prev:r.prev}};function l(e){e.indent=e.ctx.indent;e.ctx=e.ctx.prev};return{startState:function(){return{tokenize:a,ctx:{type:'top',indent:-e.indentUnit,flags:i},indent:0,afterIdent:!1}},token:function(r,e){if(r.sol()){if((e.ctx.flags&3)==0)e.ctx.flags|=i;if(e.ctx.flags&f)l(e);e.indent=r.indentation()};if(r.eatSpace())return null;var a=e.tokenize(r,e);if(a!='comment'&&(e.ctx.flags&i)==0)c(e,o);if((t==';'||t=='{'||t=='}')&&e.ctx.type=='block')l(e);if(t=='{')n(e,'}',r);else if(t=='('){n(e,')',r);if(e.afterIdent)e.ctx.argList=!0}
else if(t=='[')n(e,']',r);else if(t=='block')n(e,'block',r);else if(t==e.ctx.type)l(e);else if(e.ctx.type=='block'&&a!='comment')c(e,f);e.afterIdent=a=='variable'||a=='keyword';return a},indent:function(t,n){if(t.tokenize!=a)return 0;var i=n&&n.charAt(0),r=t.ctx,l=i==r.type;if(r.flags&f)r=r.prev;if(r.type=='block')return r.indent+(i=='{'?0:e.indentUnit);else if(r.flags&o)return r.column+(l?0:1);else return r.indent+(l?0:e.indentUnit)},lineComment:'#'}});e.defineMIME('text/x-rsrc','r')});