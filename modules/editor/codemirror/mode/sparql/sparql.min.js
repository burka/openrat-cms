(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMode('sparql',function(e){var l=e.indentUnit,t;function o(e){return new RegExp('^(?:'+e.join('|')+')$','i')};var s=o(['str','lang','langmatches','datatype','bound','sameterm','isiri','isuri','iri','uri','bnode','count','sum','min','max','avg','sample','group_concat','rand','abs','ceil','floor','round','concat','substr','strlen','replace','ucase','lcase','encode_for_uri','contains','strstarts','strends','strbefore','strafter','year','month','day','hours','minutes','seconds','timezone','tz','now','uuid','struuid','md5','sha1','sha256','sha384','sha512','coalesce','if','strlang','strdt','isnumeric','regex','exists','isblank','isliteral','a','bind']),c=o(['base','prefix','select','distinct','reduced','construct','describe','ask','from','named','where','order','limit','offset','filter','optional','graph','by','asc','desc','as','having','undef','values','group','minus','in','not','service','silent','using','insert','delete','union','true','false','with','data','copy','to','move','add','create','drop','clear','load']),i=/[*+\-<>=&|\^\/!\?]/;function a(e,r){var n=e.next();t=null;if(n=='$'||n=='?'){if(n=='?'&&e.match(/\s/,!1)){return'operator'};e.match(/^[\w\d]*/);return'variable-2'}
else if(n=='<'&&!e.match(/^[\s\u00a0=]/,!1)){e.match(/^[^\s\u00a0>]*>?/);return'atom'}
else if(n=='"'||n=='\''){r.tokenize=u(n);return r.tokenize(e,r)}
else if(/[{}\(\),\.;\[\]]/.test(n)){t=n;return'bracket'}
else if(n=='#'){e.skipToEnd();return'comment'}
else if(i.test(n)){e.eatWhile(i);return'operator'}
else if(n==':'){e.eatWhile(/[\w\d\._\-]/);return'atom'}
else if(n=='@'){e.eatWhile(/[a-z\d\-]/i);return'meta'}
else{e.eatWhile(/[_\w\d]/);if(e.eat(':')){e.eatWhile(/[\w\d_\-]/);return'atom'};var o=e.current();if(s.test(o))return'builtin';else if(c.test(o))return'keyword';else return'variable'}};function u(e){return function(t,n){var r=!1,i;while((i=t.next())!=null){if(i==e&&!r){n.tokenize=a;break};r=!r&&i=='\\'};return'string'}};function n(e,t,n){e.context={prev:e.context,indent:e.indent,col:n,type:t}};function r(e){e.indent=e.context.indent;e.context=e.context.prev};return{startState:function(){return{tokenize:a,context:null,indent:0,col:0}},token:function(i,e){if(i.sol()){if(e.context&&e.context.align==null)e.context.align=!1;e.indent=i.indentation()};if(i.eatSpace())return null;var o=e.tokenize(i,e);if(o!='comment'&&e.context&&e.context.align==null&&e.context.type!='pattern'){e.context.align=!0};if(t=='(')n(e,')',i.column());else if(t=='[')n(e,']',i.column());else if(t=='{')n(e,'}',i.column());else if(/[\]\}\)]/.test(t)){while(e.context&&e.context.type=='pattern')r(e);if(e.context&&t==e.context.type){r(e);if(t=='}'&&e.context&&e.context.type=='pattern')r(e)}}
else if(t=='.'&&e.context&&e.context.type=='pattern')r(e);else if(/atom|string|variable/.test(o)&&e.context){if(/[\}\]]/.test(e.context.type))n(e,'pattern',i.column());else if(e.context.type=='pattern'&&!e.context.align){e.context.align=!0;e.context.col=i.column()}};return o},indent:function(t,n){var i=n&&n.charAt(0),e=t.context;if(/[\]\}]/.test(i))while(e&&e.type=='pattern')e=e.prev;var r=e&&i==e.type;if(!e)return 0;else if(e.type=='pattern')return e.col;else if(e.align)return e.col+(r?0:1);else return e.indent+(r?0:l)},lineComment:'#'}});e.defineMIME('application/sparql-query','sparql')});