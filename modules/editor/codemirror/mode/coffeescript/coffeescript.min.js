(function(e){if(typeof exports=='object'&&typeof module=='object')e(require('../../lib/codemirror'));else if(typeof define=='function'&&define.amd)define(['../../lib/codemirror'],e);else e(CodeMirror)})(function(e){'use strict';e.defineMode('coffeescript',function(e,t){var f='error';function i(e){return new RegExp('^(('+e.join(')|(')+'))\\b')};var m=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,v=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,a=/^[_A-Za-z$][_A-Za-z$0-9]*/,k=/^@[_A-Za-z$][_A-Za-z$0-9]*/,y=i(['and','or','not','is','isnt','in','instanceof','typeof']),r=['for','while','loop','if','unless','else','switch','try','catch','finally','class'],g=['break','by','continue','debugger','delete','do','in','of','new','return','then','this','@','throw','when','until','extends'],b=i(r.concat(g));r=i(r);var u=/^('{3}|"{3}|['"])/,l=/^(\/{3}|\/)/,d=['Infinity','NaN','undefined','null','true','false','on','off','yes','no'],h=i(d);function n(e,t){if(e.sol()){if(t.scope.align===null)t.scope.align=!1;var i=t.scope.offset;if(e.eatSpace()){var o=e.indentation();if(o>i&&t.scope.type=='coffee'){return'indent'}
else if(o<i){return'dedent'};return null}
else{if(i>0){c(e,t)}}};if(e.eatSpace()){return null};var s=e.peek();if(e.match('####')){e.skipToEnd();return'comment'};if(e.match('###')){t.tokenize=z;return t.tokenize(e,t)};if(s==='#'){e.skipToEnd();return'comment'};if(e.match(/^-?[0-9\.]/,!1)){var r=!1;if(e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)){r=!0};if(e.match(/^-?\d+\.\d*/)){r=!0};if(e.match(/^-?\.\d+/)){r=!0};if(r){if(e.peek()=='.'){e.backUp(1)};return'number'};var n=!1;if(e.match(/^-?0x[0-9a-f]+/i)){n=!0};if(e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)){n=!0};if(e.match(/^-?0(?![\dx])/i)){n=!0};if(n){return'number'}};if(e.match(u)){t.tokenize=p(e.current(),!1,'string');return t.tokenize(e,t)};if(e.match(l)){if(e.current()!='/'||e.match(/^.*\//,!1)){t.tokenize=p(e.current(),!0,'string-2');return t.tokenize(e,t)}
else{e.backUp(1)}};if(e.match(m)||e.match(y)){return'operator'};if(e.match(v)){return'punctuation'};if(e.match(h)){return'atom'};if(e.match(k)||t.prop&&e.match(a)){return'property'};if(e.match(b)){return'keyword'};if(e.match(a)){return'variable'};e.next();return f};function p(e,r,i){return function(o,c){while(!o.eol()){o.eatWhile(/[^'"\/\\]/);if(o.eat('\\')){o.next();if(r&&o.eol()){return i}}
else if(o.match(e)){c.tokenize=n;return i}
else{o.eat(/['"\/]/)}};if(r){if(t.singleLineStringErrors){i=f}
else{c.tokenize=n}};return i}};function z(e,t){while(!e.eol()){e.eatWhile(/[^#]/);if(e.match('###')){t.tokenize=n;break};e.eatWhile('#')};return'comment'};function o(t,n,i){i=i||'coffee';var f=0,o=!1,c=null;for(var r=n.scope;r;r=r.prev){if(r.type==='coffee'||r.type=='}'){f=r.offset+e.indentUnit;break}};if(i!=='coffee'){o=null;c=t.column()+t.current().length}
else if(n.scope.align){n.scope.align=!1};n.scope={offset:f,type:i,prev:n.scope,align:o,alignOffset:c}};function c(t,e){if(!e.scope.prev)return;if(e.scope.type==='coffee'){var r=t.indentation(),i=!1;for(var n=e.scope;n;n=n.prev){if(r===n.offset){i=!0;break}};if(!i){return!0}
while(e.scope.prev&&e.scope.offset!==r){e.scope=e.scope.prev};return!1}
else{e.scope=e.scope.prev;return!1}};function x(t,e){var a=e.tokenize(t,e),n=t.current();if(n==='return'){e.dedent=!0};if(((n==='->'||n==='=>')&&t.eol())||a==='indent'){o(t,e)};var i='[({'.indexOf(n);if(i!==-1){o(t,e,'])}'.slice(i,i+1))};if(r.exec(n)){o(t,e)};if(n=='then'){c(t,e)};if(a==='dedent'){if(c(t,e)){return f}};i='])}'.indexOf(n);if(i!==-1){while(e.scope.type=='coffee'&&e.scope.prev)e.scope=e.scope.prev;if(e.scope.type==n)e.scope=e.scope.prev};if(e.dedent&&t.eol()){if(e.scope.type=='coffee'&&e.scope.prev)e.scope=e.scope.prev;e.dedent=!1};return a};var s={startState:function(e){return{tokenize:n,scope:{offset:e||0,type:'coffee',prev:null,align:!1},prop:!1,dedent:0}},token:function(e,t){var r=t.scope.align===null&&t.scope;if(r&&e.sol())r.align=!1;var n=x(e,t);if(n&&n!='comment'){if(r)r.align=!0;t.prop=n=='punctuation'&&e.current()=='.'};return n},indent:function(e,t){if(e.tokenize!=n)return 0;var r=e.scope,f=t&&'])}'.indexOf(t.charAt(0))>-1;if(f)while(r.type=='coffee'&&r.prev)r=r.prev;var i=f&&r.type===t.charAt(0);if(r.align)return r.alignOffset-(i?1:0);else return(i?r.prev:r).offset},lineComment:'#',fold:'indent'};return s});e.defineMIME('application/vnd.coffeescript','coffeescript');e.defineMIME('text/x-coffeescript','coffeescript');e.defineMIME('text/coffeescript','coffeescript')});